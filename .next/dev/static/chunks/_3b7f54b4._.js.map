{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/lib/store.ts"],"sourcesContent":["import { create } from \"zustand\"\nimport { persist } from \"zustand/middleware\"\nimport type { CanvasObject, Layer, User, ChatMessage, ToolType, BrushSettings, ShapeSettings, HistoryStep, CanvasSettings, Keybindings, Language } from \"./types\"\n\nconst generateKey = () => {\n  return Math.random().toString(36).substring(2, 8).toUpperCase()\n}\n\nexport const DEFAULT_KEYBINDINGS: Keybindings = {\n  select: \"v\",\n  brush: \"b\",\n  eraser: \"e\",\n  shape: \"s\",\n  text: \"t\",\n  note: \"n\",\n  image: \"i\",\n}\n\ninterface HaloboardState {\n  projectKey: string\n  setProjectKey: (key: string) => void\n\n  canvasSettings: CanvasSettings\n  setCanvasSettings: (settings: Partial<CanvasSettings>) => void\n\n  objects: CanvasObject[]\n  layers: Layer[]\n  activeLayerId: string\n  selectedIds: string[]\n  clipboard: CanvasObject[]\n  \n  history: HistoryStep[]\n  historyIndex: number\n\n  showGrid: boolean\n  showTransformHandles: boolean\n  maxUndoSteps: number\n  highlightColor: string\n  \n  language: Language\n  setLanguage: (lang: Language) => void\n\n  keybindings: Keybindings\n  setKeybinding: (action: keyof Keybindings, key: string) => void\n  resetKeybindings: () => void\n\n  activeTool: ToolType\n  brushSettings: BrushSettings\n  shapeSettings: ShapeSettings\n\n  users: User[]\n  currentUserId: string\n  chatMessages: ChatMessage[]\n\n  zoom: number\n  panX: number\n  panY: number\n  isPanning: boolean\n\n  showPropertiesPanel: boolean\n  showChat: boolean\n\n  setActiveTool: (tool: ToolType) => void\n  setBrushSettings: (settings: Partial<BrushSettings>) => void\n  setShapeSettings: (settings: Partial<ShapeSettings>) => void\n  setActiveLayer: (layerId: string) => void\n  \n  setShowGrid: (show: boolean) => void\n  setShowTransformHandles: (show: boolean) => void\n  setMaxUndoSteps: (steps: number) => void\n  setHighlightColor: (color: string) => void\n\n  loadProject: (data: Partial<HaloboardState>) => void\n  resetProject: (settings?: CanvasSettings) => void\n\n  addObject: (object: CanvasObject) => void\n  updateObject: (id: string, updates: Partial<CanvasObject>) => void\n  deleteObject: (id: string) => void\n  \n  setSelectedIds: (ids: string[]) => void\n  addLayer: (name: string) => void // Updated signature\n  updateLayer: (id: string, updates: Partial<Layer>) => void\n  deleteLayer: (id: string) => void\n  \n  moveLayer: (id: string, direction: 'up' | 'down') => void\n  reorderLayer: (fromIndex: number, toIndex: number) => void\n  moveObjectToLayer: (objectId: string, targetLayerId: string) => void\n  reorderObject: (objectId: string, direction: 'up' | 'down') => void \n  reorderObjectInLayer: (objectId: string, targetLayerId: string, newIndex: number) => void\n  \n  copy: () => void\n  paste: () => void\n  duplicate: () => void\n\n  undo: () => void\n  redo: () => void\n  setHistoryIndex: (index: number) => void\n  \n  addUser: (user: User) => void\n  updateUser: (id: string, updates: Partial<User>) => void\n  removeUser: (id: string) => void\n  addChatMessage: (message: ChatMessage) => void\n  setZoom: (zoom: number) => void\n  setPan: (x: number, y: number) => void\n  setIsPanning: (isPanning: boolean) => void\n  togglePropertiesPanel: () => void\n  toggleChat: () => void\n}\n\nexport const useHaloboardStore = create<HaloboardState>()(\n  persist(\n    (set, get) => ({\n      projectKey: generateKey(),\n      \n      canvasSettings: {\n        projectName: \"Untitled Project\",\n        infinite: true,\n        width: 1920,\n        height: 1080,\n        backgroundColor: \"#ffffff\"\n      },\n\n      objects: [],\n      layers: [{ id: \"layer-1\", name: \"Layer 1\", opacity: 1, blendMode: \"normal\", visible: true, locked: false, objectIds: [] }],\n      activeLayerId: \"layer-1\",\n      selectedIds: [],\n      clipboard: [],\n      \n      history: [{ objects: [], layers: [{ id: \"layer-1\", name: \"Layer 1\", opacity: 1, blendMode: \"normal\", visible: true, locked: false, objectIds: [] }] }],\n      historyIndex: 0,\n\n      showGrid: true,\n      showTransformHandles: true,\n      maxUndoSteps: 50,\n      highlightColor: \"#0A84FF\",\n      \n      language: \"en\",\n      setLanguage: (lang) => set({ language: lang }),\n\n      keybindings: DEFAULT_KEYBINDINGS,\n      setKeybinding: (action, key) => set((state) => ({ keybindings: { ...state.keybindings, [action]: key } })),\n      resetKeybindings: () => set({ keybindings: DEFAULT_KEYBINDINGS }),\n\n      activeTool: \"select\",\n      brushSettings: { size: 5, opacity: 1, softness: 0.5, color: \"#000000\", eraserMode: \"object\" },\n      shapeSettings: { shapeType: \"rectangle\", fillColor: \"#E0E0E0\", strokeColor: \"#000000\", strokeWidth: 2, borderType: \"solid\", opacity: 1 },\n\n      users: [],\n      currentUserId: \"local-user\",\n      chatMessages: [],\n\n      zoom: 1,\n      panX: 0,\n      panY: 0,\n      isPanning: false,\n\n      showPropertiesPanel: true,\n      showChat: true,\n\n      setProjectKey: (key) => set({ projectKey: key }),\n      setCanvasSettings: (settings) => set((state) => ({ canvasSettings: { ...state.canvasSettings, ...settings } })),\n      setActiveTool: (tool) => set({ activeTool: tool }),\n      setBrushSettings: (settings) => set((state) => ({ brushSettings: { ...state.brushSettings, ...settings } })),\n      setShapeSettings: (settings) => set((state) => ({ shapeSettings: { ...state.shapeSettings, ...settings } })),\n      setActiveLayer: (layerId) => set({ activeLayerId: layerId }),\n\n      setShowGrid: (show) => set({ showGrid: show }),\n      setShowTransformHandles: (show) => set({ showTransformHandles: show }),\n      setMaxUndoSteps: (steps) => set({ maxUndoSteps: Math.min(200, Math.max(1, steps)) }),\n      setHighlightColor: (color) => set({ highlightColor: color }),\n\n      loadProject: (data) => set((state) => ({ ...state, ...data, history: data.history || [{ objects: data.objects || [], layers: data.layers || [] }], historyIndex: data.historyIndex || 0 })),\n\n      resetProject: (settings) => set({\n        objects: [],\n        layers: [{ id: \"layer-1\", name: \"Layer 1\", opacity: 1, blendMode: \"normal\", visible: true, locked: false, objectIds: [] }],\n        activeLayerId: \"layer-1\",\n        selectedIds: [],\n        history: [{ objects: [], layers: [{ id: \"layer-1\", name: \"Layer 1\", opacity: 1, blendMode: \"normal\", visible: true, locked: false, objectIds: [] }] }],\n        historyIndex: 0,\n        projectKey: generateKey(),\n        canvasSettings: settings || { projectName: \"Untitled Project\", infinite: true, width: 1920, height: 1080, backgroundColor: \"#ffffff\" },\n        panX: 0,\n        panY: 0,\n        zoom: 1\n      }),\n\n      addObject: (object) =>\n        set((state) => {\n          if (!object.transform.anchor) object.transform.anchor = \"top-left\"\n          if (!object.name) object.name = `${object.type.charAt(0).toUpperCase() + object.type.slice(1)} ${state.objects.filter(o => o.type === object.type).length + 1}`\n\n          const updatedLayers = state.layers.map(layer => {\n            if (layer.id === state.activeLayerId) {\n              return { ...layer, objectIds: [object.id, ...layer.objectIds] }\n            }\n            return layer\n          })\n          const newObjects = [...state.objects, { ...object, layerId: state.activeLayerId }]\n          \n          const newHistory = state.history.slice(0, state.historyIndex + 1)\n          newHistory.push({ objects: newObjects, layers: updatedLayers })\n          if (newHistory.length > state.maxUndoSteps) newHistory.shift()\n          \n          return { objects: newObjects, layers: updatedLayers, history: newHistory, historyIndex: newHistory.length - 1 }\n        }),\n\n      updateObject: (id, updates) =>\n        set((state) => {\n          const newObjects = state.objects.map((obj) => (obj.id === id ? { ...obj, ...updates } : obj))\n          return { objects: newObjects }\n        }),\n\n      deleteObject: (id) =>\n        set((state) => {\n          const newObjects = state.objects.filter((obj) => obj.id !== id)\n          const newLayers = state.layers.map(layer => ({ ...layer, objectIds: layer.objectIds.filter(objId => objId !== id) }))\n          const newHistory = state.history.slice(0, state.historyIndex + 1)\n          newHistory.push({ objects: newObjects, layers: newLayers })\n          if (newHistory.length > state.maxUndoSteps) newHistory.shift()\n          return { objects: newObjects, layers: newLayers, selectedIds: state.selectedIds.filter((selectedId) => selectedId !== id), history: newHistory, historyIndex: newHistory.length - 1 }\n        }),\n\n      setSelectedIds: (ids) => set({ selectedIds: ids }),\n\n      addLayer: (name) =>\n        set((state) => {\n          const newId = `layer-${Date.now()}`\n          const newLayer: Layer = { id: newId, name: name || `Layer ${state.layers.length + 1}`, opacity: 1, blendMode: \"normal\", visible: true, locked: false, objectIds: [] }\n          const newLayers = [newLayer, ...state.layers]\n          const newHistory = state.history.slice(0, state.historyIndex + 1)\n          newHistory.push({ objects: state.objects, layers: newLayers })\n          if (newHistory.length > state.maxUndoSteps) newHistory.shift()\n          return { layers: newLayers, activeLayerId: newId, history: newHistory, historyIndex: newHistory.length - 1 }\n        }),\n\n      updateLayer: (id, updates) =>\n        set((state) => {\n          const newLayers = state.layers.map((layer) => (layer.id === id ? { ...layer, ...updates } : layer))\n          return { layers: newLayers }\n        }),\n\n      deleteLayer: (id) =>\n        set((state) => {\n          const layerToDelete = state.layers.find(l => l.id === id); if (!layerToDelete) return state\n          const objectsToDelete = new Set(layerToDelete.objectIds)\n          const newObjects = state.objects.filter(obj => !objectsToDelete.has(obj.id))\n          const newLayers = state.layers.filter((layer) => layer.id !== id)\n          const newHistory = state.history.slice(0, state.historyIndex + 1)\n          newHistory.push({ objects: newObjects, layers: newLayers })\n          if (newHistory.length > state.maxUndoSteps) newHistory.shift()\n          return { layers: newLayers, objects: newObjects, activeLayerId: state.activeLayerId === id ? newLayers[0]?.id || \"\" : state.activeLayerId, history: newHistory, historyIndex: newHistory.length - 1 }\n        }),\n\n      moveLayer: (id, direction) =>\n        set((state) => {\n          const index = state.layers.findIndex(l => l.id === id); if (index < 0) return state\n          const newLayers = [...state.layers]\n          if (direction === 'up' && index > 0) { [newLayers[index], newLayers[index - 1]] = [newLayers[index - 1], newLayers[index]] }\n          else if (direction === 'down' && index < newLayers.length - 1) { [newLayers[index], newLayers[index + 1]] = [newLayers[index + 1], newLayers[index]] }\n          return { layers: newLayers }\n        }),\n\n      reorderLayer: (fromIndex, toIndex) => set((state) => {\n        const newLayers = [...state.layers]\n        const [movedLayer] = newLayers.splice(fromIndex, 1)\n        newLayers.splice(toIndex, 0, movedLayer)\n        return { layers: newLayers }\n      }),\n\n      moveObjectToLayer: (objectId, targetLayerId) =>\n        set((state) => {\n          const obj = state.objects.find(o => o.id === objectId); if (!obj || obj.layerId === targetLayerId) return state\n          const newLayers = state.layers.map(l => {\n            if (l.id === obj.layerId) return { ...l, objectIds: l.objectIds.filter(id => id !== objectId) }\n            if (l.id === targetLayerId) return { ...l, objectIds: [objectId, ...l.objectIds] }\n            return l\n          })\n          const newObjects = state.objects.map(o => o.id === objectId ? { ...o, layerId: targetLayerId } : o)\n          return { layers: newLayers, objects: newObjects }\n        }),\n\n      reorderObject: (objectId, direction) =>\n        set((state) => {\n          const obj = state.objects.find(o => o.id === objectId); if (!obj) return state\n          const layer = state.layers.find(l => l.id === obj.layerId); if (!layer) return state\n          const currentIdx = layer.objectIds.indexOf(objectId); if (currentIdx < 0) return state\n          const newObjectIds = [...layer.objectIds]\n          if (direction === 'up' && currentIdx > 0) {\n            [newObjectIds[currentIdx], newObjectIds[currentIdx - 1]] = [newObjectIds[currentIdx - 1], newObjectIds[currentIdx]]\n          } else if (direction === 'down' && currentIdx < newObjectIds.length - 1) {\n            [newObjectIds[currentIdx], newObjectIds[currentIdx + 1]] = [newObjectIds[currentIdx + 1], newObjectIds[currentIdx]]\n          } else { return state }\n          const newLayers = state.layers.map(l => l.id === layer.id ? { ...l, objectIds: newObjectIds } : l)\n          return { layers: newLayers }\n        }),\n\n      reorderObjectInLayer: (objectId, targetLayerId, newIndex) => set((state) => {\n        const obj = state.objects.find(o => o.id === objectId); if (!obj) return state\n        const sourceLayer = state.layers.find(l => l.id === obj.layerId); if (!sourceLayer) return state\n        let newLayers = [...state.layers]\n        newLayers = newLayers.map(l => {\n          if (l.id === obj.layerId) return { ...l, objectIds: l.objectIds.filter(id => id !== objectId) }\n          return l\n        })\n        newLayers = newLayers.map(l => {\n          if (l.id === targetLayerId) {\n            const newIds = [...l.objectIds]\n            newIds.splice(newIndex, 0, objectId)\n            return { ...l, objectIds: newIds }\n          }\n          return l\n        })\n        const newObjects = state.objects.map(o => o.id === objectId ? { ...o, layerId: targetLayerId } : o)\n        return { layers: newLayers, objects: newObjects }\n      }),\n\n      copy: () => set((state) => {\n        const selected = state.objects.filter(o => state.selectedIds.includes(o.id))\n        return { clipboard: selected }\n      }),\n\n      paste: () => set((state) => {\n        if (state.clipboard.length === 0) return state\n        const newObjects: CanvasObject[] = []\n        const pastedIds: string[] = []\n        state.clipboard.forEach(item => {\n          const newId = `${item.type}-${Date.now()}-${Math.random()}`\n          const newObj = {\n            ...item, id: newId, layerId: state.activeLayerId, name: item.name + \" Copy\",\n            transform: { ...item.transform, x: item.transform.x + 20, y: item.transform.y + 20 }\n          }\n          newObjects.push(newObj)\n          pastedIds.push(newId)\n        })\n        const updatedLayers = state.layers.map(layer => {\n          if (layer.id === state.activeLayerId) return { ...layer, objectIds: [ ...pastedIds, ...layer.objectIds] }\n          return layer\n        })\n        const finalObjects = [...state.objects, ...newObjects]\n        return { objects: finalObjects, layers: updatedLayers, selectedIds: pastedIds }\n      }),\n\n      duplicate: () => { const state = get(); state.copy(); state.paste() },\n      undo: () => set((state) => { if (state.historyIndex > 0) { const prevStep = state.history[state.historyIndex - 1]; return { objects: prevStep.objects, layers: prevStep.layers, historyIndex: state.historyIndex - 1 } } return state }),\n      redo: () => set((state) => { if (state.historyIndex < state.history.length - 1) { const nextStep = state.history[state.historyIndex + 1]; return { objects: nextStep.objects, layers: nextStep.layers, historyIndex: state.historyIndex + 1 } } return state }),\n      setHistoryIndex: (index) => set((state) => { if (index >= 0 && index < state.history.length) { const step = state.history[index]; return { objects: step.objects, layers: step.layers, historyIndex: index } } return state }),\n\n      addUser: (user) => set((state) => ({ users: [...state.users, user] })),\n      updateUser: (id, updates) => set((state) => ({ users: state.users.map((user) => (user.id === id ? { ...user, ...updates } : user)) })),\n      removeUser: (id) => set((state) => ({ users: state.users.filter((user) => user.id !== id) })),\n      addChatMessage: (message) => set((state) => ({ chatMessages: [...state.chatMessages, message] })),\n      setZoom: (zoom) => set({ zoom: Math.max(0.1, Math.min(zoom, 5)) }),\n      setPan: (x, y) => set({ panX: x, panY: y }),\n      setIsPanning: (isPanning) => set({ isPanning }),\n      togglePropertiesPanel: () => set((state) => ({ showPropertiesPanel: !state.showPropertiesPanel })),\n      toggleChat: () => set((state) => ({ showChat: !state.showChat })),\n    }),\n    {\n      name: 'haloboard-storage',\n      partialize: (state) => ({\n        highlightColor: state.highlightColor,\n        maxUndoSteps: state.maxUndoSteps,\n        brushSettings: state.brushSettings,\n        shapeSettings: state.shapeSettings,\n        showGrid: state.showGrid,\n        showTransformHandles: state.showTransformHandles,\n        keybindings: state.keybindings,\n        language: state.language\n      }),\n    }\n  )\n)"],"names":[],"mappings":"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"}},
    {"offset": {"line": 594, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/lib/collaboration.ts"],"sourcesContent":["import type { CanvasObject, Point } from \"./types\"\n\n// DUMMY MANAGER: Does nothing, ensuring zero RAM usage for online features\nexport class CollaborationManager {\n  constructor(roomId: string) {\n    console.log(\"Collaboration is currently disabled.\")\n  }\n\n  public broadcastObject(object: CanvasObject) {}\n  public broadcastCursor(position: Point) {}\n  public broadcastDelete(objectId: string) {}\n  public disconnect() {}\n}\n\n// Hook always returns null, preventing any logic from running in components\nexport function useCollaboration(roomId: string = \"\") {\n  return null\n}\n"],"names":[],"mappings":";;;;;;AAGO,MAAM;IACX,YAAY,MAAc,CAAE;QAC1B,QAAQ,GAAG,CAAC;IACd;IAEO,gBAAgB,MAAoB,EAAE,CAAC;IACvC,gBAAgB,QAAe,EAAE,CAAC;IAClC,gBAAgB,QAAgB,EAAE,CAAC;IACnC,aAAa,CAAC;AACvB;AAGO,SAAS,iBAAiB,SAAiB,EAAE;IAClD,OAAO;AACT"}},
    {"offset": {"line": 619, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/lib/i18n.ts"],"sourcesContent":["import { useHaloboardStore } from \"@/lib/store\"\nimport type { Language } from \"@/lib/types\"\n\nconst translations = {\n  en: {\n    untitledProject: \"Untitled Project\",\n    newProject: \"New Project\",\n    openTpad: \"Open .tpad File\",\n    importImage: \"Import Image\",\n    share: \"Share\",\n    settings: \"Settings\",\n    showGrid: \"Show Grid\",\n    darkMode: \"Dark Mode\",\n    maxUndoSteps: \"Max Undo Steps\",\n    highlightColor: \"Highlight Color\",\n    keybindings: \"Keybindings\",\n    language: \"Language\",\n    resetDefaults: \"Reset Defaults\",\n    done: \"Done\",\n    export: \"Export\",\n    exportAs: \"Export as\",\n    exportTPAD: \"Export as .tpad\",\n    exportPSD: \"Export as PSD\",\n    exportPNG: \"Export as PNG\",\n    exportSVG: \"Export as SVG\",\n    exportJSON: \"Export as JSON\",\n    layers: \"Layers\",\n    properties: \"Properties\",\n    history: \"History\",\n    chat: \"Chat\",\n    shapeTool: \"Shape Tool Config\",\n    brushSettings: \"Brush Settings\",\n    eraserSettings: \"Eraser Settings\",\n    imageSettings: \"Image Settings\",\n    textStyles: \"Text Styles\",\n    noteStyles: \"Note Styles\",\n    strokeColor: \"Stroke Color\",\n    fillColor: \"Fill Color\",\n    opacity: \"Opacity\",\n    size: \"Size\",\n    position: \"Position\",\n    rotation: \"Rotation\",\n    align: \"Alignment\",\n    verticalAlign: \"Vertical Alignment\",\n    anchorPoint: \"Anchor Point\",\n    font: \"Font\",\n    background: \"Background\",\n    stack: \"Stack\",\n    newLayer: \"New Layer\",\n    layer: \"Layer\",\n    undo: \"Undo\",\n    redo: \"Redo\",\n    initialState: \"Initial State\",\n    action: \"Action\",\n    current: \"Current\",\n    autoSaveMessage: \"TeamPad automatically saves all your projects! No need to worry!\",\n    clickToEdit: \"Click to edit\",\n    newNote: \"New note\",\n    tools: {\n      select: \"Select\",\n      brush: \"Brush\",\n      eraser: \"Eraser\",\n      shape: \"Shapes\",\n      text: \"Text\",\n      note: \"Sticky Note\",\n      image: \"Image\"\n    }\n  },\n  tr: {\n    untitledProject: \"Adsız Proje\",\n    newProject: \"Yeni Proje\",\n    openTpad: \".tpad Dosyası Aç\",\n    importImage: \"Resim İçe Aktar\",\n    share: \"Paylaş\",\n    settings: \"Ayarlar\",\n    showGrid: \"Izgarayı Göster\",\n    darkMode: \"Karanlık Mod\",\n    maxUndoSteps: \"Maks. Geri Alma\",\n    highlightColor: \"Vurgu Rengi\",\n    keybindings: \"Tuş Atamaları\",\n    language: \"Dil\",\n    resetDefaults: \"Varsayılana Dön\",\n    done: \"Tamam\",\n    export: \"Dışa Aktar\",\n    exportAs: \"Olarak Dışa Aktar\",\n    exportTPAD: \".tpad Olarak Dışa Aktar\",\n    exportPSD: \"PSD Olarak Dışa Aktar\",\n    exportPNG: \"PNG Olarak Dışa Aktar\",\n    exportSVG: \"SVG Olarak Dışa Aktar\",\n    exportJSON: \"JSON Olarak Dışa Aktar\",\n    layers: \"Katmanlar\",\n    properties: \"Özellikler\",\n    history: \"Geçmiş\",\n    chat: \"Sohbet\",\n    shapeTool: \"Şekil Aracı\",\n    brushSettings: \"Fırça Ayarları\",\n    eraserSettings: \"Silgi Ayarları\",\n    imageSettings: \"Resim Ayarları\",\n    textStyles: \"Yazı Stilleri\",\n    noteStyles: \"Not Stilleri\",\n    strokeColor: \"Çizgi Rengi\",\n    fillColor: \"Dolgu Rengi\",\n    opacity: \"Opaklık\",\n    size: \"Boyut\",\n    position: \"Konum\",\n    rotation: \"Döndürme\",\n    align: \"Hizalama\",\n    verticalAlign: \"Dikey Hizalama\",\n    anchorPoint: \"Bağlantı Noktası\",\n    font: \"Yazı Tipi\",\n    background: \"Arkaplan\",\n    stack: \"Yığın\",\n    newLayer: \"Yeni Katman\",\n    layer: \"Katman\",\n    undo: \"Geri Al\",\n    redo: \"Yinele\",\n    initialState: \"Başlangıç\",\n    action: \"İşlem\",\n    current: \"Mevcut\",\n    autoSaveMessage: \"TeamPad projelerinizi otomatik olarak kaydeder! Endişelenmenize gerek yok!\",\n    clickToEdit: \"Düzenlemek için tıkla\",\n    newNote: \"Yeni not\",\n    tools: {\n      select: \"Seçim\",\n      brush: \"Fırça\",\n      eraser: \"Silgi\",\n      shape: \"Şekiller\",\n      text: \"Metin\",\n      note: \"Yapışkan Not\",\n      image: \"Resim\"\n    }\n  },\n  ru: {\n    untitledProject: \"Безымянный проект\",\n    newProject: \"Новый проект\",\n    openTpad: \"Открыть .tpad\",\n    importImage: \"Импорт изобр.\",\n    share: \"Поделиться\",\n    settings: \"Настройки\",\n    showGrid: \"Показать сетку\",\n    darkMode: \"Темный режим\",\n    maxUndoSteps: \"Макс. отмен\",\n    highlightColor: \"Цвет выделения\",\n    keybindings: \"Горячие клавиши\",\n    language: \"Язык\",\n    resetDefaults: \"Сбросить\",\n    done: \"Готово\",\n    export: \"Экспорт\",\n    exportAs: \"Экспорт как\",\n    exportTPAD: \"Экспорт в .tpad\",\n    exportPSD: \"Экспорт в PSD\",\n    exportPNG: \"Экспорт в PNG\",\n    exportSVG: \"Экспорт в SVG\",\n    exportJSON: \"Экспорт в JSON\",\n    layers: \"Слои\",\n    properties: \"Свойства\",\n    history: \"История\",\n    chat: \"Чат\",\n    shapeTool: \"Настр. фигуры\",\n    brushSettings: \"Настр. кисти\",\n    eraserSettings: \"Настр. ластика\",\n    imageSettings: \"Настр. изобр.\",\n    textStyles: \"Стили текста\",\n    noteStyles: \"Стили заметки\",\n    strokeColor: \"Цвет штриха\",\n    fillColor: \"Цвет заливки\",\n    opacity: \"Прозрачность\",\n    size: \"Размер\",\n    position: \"Позиция\",\n    rotation: \"Вращение\",\n    align: \"Выравнивание\",\n    verticalAlign: \"Верт. выравнивание\",\n    anchorPoint: \"Якорная точка\",\n    font: \"Шрифт\",\n    background: \"Фон\",\n    stack: \"Стопка\",\n    newLayer: \"Новый слой\",\n    layer: \"Слой\",\n    undo: \"Отменить\",\n    redo: \"Повторить\",\n    initialState: \"Начало\",\n    action: \"Действие\",\n    current: \"Тек.\",\n    autoSaveMessage: \"TeamPad автоматически сохраняет все ваши проекты! Не волнуйтесь!\",\n    clickToEdit: \"Нажмите для ред.\",\n    newNote: \"Новая заметка\",\n    tools: {\n      select: \"Выбор\",\n      brush: \"Кисть\",\n      eraser: \"Ластик\",\n      shape: \"Фигуры\",\n      text: \"Текст\",\n      note: \"Заметка\",\n      image: \"Изображение\"\n    }\n  },\n  es: {\n    untitledProject: \"Proyecto sin título\",\n    newProject: \"Nuevo Proyecto\",\n    openTpad: \"Abrir archivo .tpad\",\n    importImage: \"Importar Imagen\",\n    share: \"Compartir\",\n    settings: \"Ajustes\",\n    showGrid: \"Mostrar cuadrícula\",\n    darkMode: \"Modo oscuro\",\n    maxUndoSteps: \"Pasos de deshacer\",\n    highlightColor: \"Color de resaltado\",\n    keybindings: \"Atajos de teclado\",\n    language: \"Idioma\",\n    resetDefaults: \"Restablecer\",\n    done: \"Hecho\",\n    export: \"Exportar\",\n    exportAs: \"Exportar como\",\n    exportTPAD: \"Exportar como .tpad\",\n    exportPSD: \"Exportar como PSD\",\n    exportPNG: \"Exportar como PNG\",\n    exportSVG: \"Exportar como SVG\",\n    exportJSON: \"Exportar como JSON\",\n    layers: \"Capas\",\n    properties: \"Propiedades\",\n    history: \"Historial\",\n    chat: \"Chat\",\n    shapeTool: \"Config. de Forma\",\n    brushSettings: \"Config. de Pincel\",\n    eraserSettings: \"Config. de Borrador\",\n    imageSettings: \"Config. de Imagen\",\n    textStyles: \"Estilos de Texto\",\n    noteStyles: \"Estilos de Nota\",\n    strokeColor: \"Color de trazo\",\n    fillColor: \"Color de relleno\",\n    opacity: \"Opacidad\",\n    size: \"Tamaño\",\n    position: \"Posición\",\n    rotation: \"Rotación\",\n    align: \"Alineación\",\n    verticalAlign: \"Alineación Vertical\",\n    anchorPoint: \"Punto de Anclaje\",\n    font: \"Fuente\",\n    background: \"Fondo\",\n    stack: \"Pila\",\n    newLayer: \"Nueva Capa\",\n    layer: \"Capa\",\n    undo: \"Deshacer\",\n    redo: \"Rehacer\",\n    initialState: \"Estado Inicial\",\n    action: \"Acción\",\n    current: \"Actual\",\n    autoSaveMessage: \"¡TeamPad guarda automáticamente todos tus proyectos! ¡No te preocupes!\",\n    clickToEdit: \"Clic para editar\",\n    newNote: \"Nueva nota\",\n    tools: {\n      select: \"Seleccionar\",\n      brush: \"Pincel\",\n      eraser: \"Borrador\",\n      shape: \"Formas\",\n      text: \"Texto\",\n      note: \"Nota Adhesiva\",\n      image: \"Imagen\"\n    }\n  }\n}\n\nexport function useTranslation() {\n  const language = useHaloboardStore((state) => state.language)\n  const t = (key: string, category?: string) => {\n    const langData = translations[language] || translations.en\n    if (category && (langData as any)[category]) {\n      return (langData as any)[category][key] || key\n    }\n    return (langData as any)[key] || key\n  }\n  return { t, language }\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 913, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/canvas.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useEffect, useRef, useState } from \"react\"\nimport { useHaloboardStore } from \"@/lib/store\"\nimport type { Point, CanvasObject, PathData, ShapeData, TextData, NoteData, ImageData, AnchorPosition } from \"@/lib/types\"\nimport { useCollaboration } from \"@/lib/collaboration\"\nimport { useTheme } from \"next-themes\"\nimport { useTranslation } from \"@/lib/i18n\"\n\nexport function Canvas() {\n  const canvasRef = useRef<HTMLCanvasElement>(null)\n  const containerRef = useRef<HTMLDivElement>(null)\n  const textAreaRef = useRef<HTMLTextAreaElement>(null)\n  const imageCache = useRef<Record<string, HTMLImageElement>>({})\n  \n  // Visual State\n  const [interactionMode, setInteractionMode] = useState<'none' | 'drawing' | 'moving' | 'resizing' | 'rotating' | 'selecting'>('none')\n  const [isDrawing, setIsDrawing] = useState(false)\n  const [currentPath, setCurrentPath] = useState<Point[]>([])\n  const [startPoint, setStartPoint] = useState<Point | null>(null)\n  const [currentMousePos, setCurrentMousePos] = useState<Point | null>(null)\n  \n  // Logic Refs\n  const dragStartRef = useRef<Point | null>(null)\n  const currentMousePosRef = useRef<Point | null>(null)\n  const interactionModeRef = useRef<'none' | 'drawing' | 'moving' | 'resizing' | 'rotating' | 'selecting'>('none')\n  const activeHandleRef = useRef<string | null>(null)\n  const initialObjectStateRef = useRef<CanvasObject | null>(null)\n  const initialObjectsMapRef = useRef<Map<string, CanvasObject>>(new Map())\n  const startPointRef = useRef<Point | null>(null)\n\n  // Inline Editing State\n  const [editingTextId, setEditingTextId] = useState<string | null>(null)\n  const [editText, setEditText] = useState(\"\")\n\n  const { theme } = useTheme()\n  useCollaboration()\n  const { t } = useTranslation()\n\n  const {\n    objects,\n    layers,\n    activeTool,\n    setActiveTool,\n    brushSettings,\n    shapeSettings,\n    canvasSettings,\n    activeLayerId,\n    zoom,\n    panX,\n    panY,\n    isPanning,\n    selectedIds,\n    addObject,\n    updateObject,\n    deleteObject, \n    setIsPanning,\n    setPan,\n    setSelectedIds,\n    showGrid,\n    showTransformHandles,\n    highlightColor,\n    setZoom,\n    copy, paste, duplicate,\n    keybindings\n  } = useHaloboardStore()\n\n  useEffect(() => {\n    const canvas = canvasRef.current; const container = containerRef.current\n    if (!canvas || !container) return; const ctx = canvas.getContext(\"2d\"); if (!ctx) return\n    const updateSize = () => {\n      const dpr = window.devicePixelRatio || 1\n      const rect = container.getBoundingClientRect()\n      canvas.width = rect.width * dpr\n      canvas.height = rect.height * dpr\n      ctx.scale(dpr, dpr)\n      renderCanvas()\n    }\n    const observer = new ResizeObserver(updateSize)\n    observer.observe(container)\n    updateSize()\n    return () => observer.disconnect()\n  }, [])\n\n  useEffect(() => { renderCanvas() }, [objects, zoom, panX, panY, selectedIds, layers, showGrid, highlightColor, interactionMode, currentMousePos, theme, canvasSettings, currentPath, showTransformHandles, editingTextId])\n\n  // --- Helpers ---\n  const getObjectSize = (obj: CanvasObject) => {\n    switch (obj.type) {\n      case \"path\": const d = obj.data as PathData; if (d.points.length < 2) return { width: 0, height: 0 }; const xs = d.points.map(p=>p.x); const ys = d.points.map(p=>p.y); return { width: Math.max(...xs)-Math.min(...xs), height: Math.max(...ys)-Math.min(...ys) }\n      case \"shape\": return { width: (obj.data as ShapeData).width, height: (obj.data as ShapeData).height }\n      case \"text\": return { width: (obj.data as TextData).width, height: (obj.data as TextData).height }\n      case \"note\": return { width: (obj.data as NoteData).width, height: (obj.data as NoteData).height }\n      case \"image\": return { width: (obj.data as ImageData).width, height: (obj.data as ImageData).height }\n    }\n    return { width: 0, height: 0 }\n  }\n  \n  const getAnchorOffset = (obj: CanvasObject, width: number, height: number) => {\n    const anchor = obj.transform.anchor || 'center' // Default to Center\n    let x = 0, y = 0\n    if (anchor.includes('center')) x = width / 2\n    if (anchor.includes('right')) x = width\n    if (anchor.includes('bottom')) y = height\n    if (anchor === 'center-left') y = height / 2\n    if (anchor === 'center-right') y = height / 2\n    if (anchor === 'center') { x = width / 2; y = height / 2 }\n    return { x, y }\n  }\n  \n  const getObjectBounds = (obj: CanvasObject) => { const s = getObjectSize(obj); return { x: 0, y: 0, ...s } }\n\n  // --- Renderer ---\n  const renderCanvas = () => {\n    const canvas = canvasRef.current; if (!canvas) return; const ctx = canvas.getContext(\"2d\"); if (!ctx) return\n    const logicalWidth = canvas.width / (window.devicePixelRatio || 1); const logicalHeight = canvas.height / (window.devicePixelRatio || 1)\n    \n    if (theme === 'dark') { ctx.fillStyle = \"#171717\"; ctx.fillRect(0, 0, logicalWidth, logicalHeight) } \n    else { ctx.clearRect(0, 0, logicalWidth, logicalHeight) }\n\n    if (showGrid) {\n      if (!canvasSettings.infinite) {\n        ctx.save(); ctx.beginPath(); ctx.rect(0, 0, canvasSettings.width, canvasSettings.height); ctx.clip()\n        renderGrid(ctx, canvasSettings.width, canvasSettings.height, true); ctx.restore()\n      } else {\n        ctx.save()\n        const startX = -panX / zoom; const startY = -panY / zoom\n        const endX = startX + logicalWidth / zoom; const endY = startY + logicalHeight / zoom\n        renderGrid(ctx, endX - startX, endY - startY, false, startX, startY); ctx.restore()\n      }\n    }\n\n    ctx.save()\n    ctx.translate(panX, panY)\n    ctx.scale(zoom, zoom)\n\n    if (!canvasSettings.infinite) {\n      ctx.shadowColor = \"rgba(0,0,0,0.1)\"; ctx.shadowBlur = 20; ctx.shadowOffsetY = 4\n      ctx.fillStyle = canvasSettings.backgroundColor; ctx.fillRect(0, 0, canvasSettings.width, canvasSettings.height)\n      ctx.shadowColor = \"transparent\"\n    }\n\n    const layersToRender = [...layers].reverse()\n    layersToRender.forEach(layer => {\n      if (!layer.visible) return\n      const objectsToRenderIds = [...layer.objectIds].reverse()\n      objectsToRenderIds.forEach(objId => {\n        const obj = objects.find(o => o.id === objId)\n        if (!obj || obj.id === editingTextId) return\n        const { width, height } = getObjectSize(obj)\n        const anchor = getAnchorOffset(obj, width, height)\n        \n        ctx.save()\n        ctx.translate(obj.transform.x, obj.transform.y)\n        ctx.translate(anchor.x * obj.transform.scaleX, anchor.y * obj.transform.scaleY)\n        ctx.rotate((obj.transform.rotation * Math.PI) / 180)\n        ctx.scale(obj.transform.scaleX, obj.transform.scaleY)\n        ctx.translate(-anchor.x, -anchor.y)\n\n        switch (obj.type) { \n          case \"path\": renderPath(ctx, obj); break; \n          case \"shape\": renderShape(ctx, obj); break; \n          case \"text\": renderText(ctx, obj); break; \n          case \"note\": renderNote(ctx, obj); break; \n          case \"image\": renderImage(ctx, obj); break; \n        }\n        ctx.restore()\n        if (selectedIds.includes(obj.id) && obj.id !== editingTextId) renderSelection(ctx, obj)\n      })\n    })\n\n    if (interactionMode === 'drawing' && activeTool === 'brush' && currentPath.length > 1) {\n      ctx.save(); ctx.globalAlpha = brushSettings.opacity; ctx.strokeStyle = brushSettings.color; ctx.lineWidth = brushSettings.size\n      ctx.lineCap = \"round\"; ctx.lineJoin = \"round\"; ctx.setLineDash([]); ctx.beginPath(); ctx.moveTo(currentPath[0].x, currentPath[0].y)\n      for (let i = 1; i < currentPath.length; i++) ctx.lineTo(currentPath[i].x, currentPath[i].y)\n      ctx.stroke(); ctx.restore()\n    }\n\n    // Selection Rectangle (Rubber Band) - Fixed\n    if (interactionMode === 'selecting' && dragStartRef.current && currentMousePos) {\n      const dragStart = dragStartRef.current\n      const x = Math.min(dragStart.x, currentMousePos.x)\n      const y = Math.min(dragStart.y, currentMousePos.y)\n      const w = Math.abs(currentMousePos.x - dragStart.x)\n      const h = Math.abs(currentMousePos.y - dragStart.y)\n      \n      ctx.save()\n      ctx.fillStyle = `${highlightColor}20`\n      ctx.strokeStyle = highlightColor\n      ctx.lineWidth = 1 / zoom\n      ctx.fillRect(x, y, w, h)\n      ctx.strokeRect(x, y, w, h)\n      ctx.restore()\n    }\n\n    if ((activeTool === 'brush' || activeTool === 'eraser') && currentMousePos) {\n      ctx.save(); ctx.beginPath(); ctx.arc(currentMousePos.x, currentMousePos.y, brushSettings.size / 2, 0, Math.PI * 2)\n      ctx.strokeStyle = '#888'; ctx.fillStyle = activeTool === 'eraser' ? 'rgba(255,255,255,0.3)' : brushSettings.color + '33'\n      ctx.lineWidth = 1 / zoom; ctx.fill(); ctx.stroke(); ctx.restore()\n    }\n    ctx.restore()\n  }\n\n  // Render Helpers\n  const renderGrid = (ctx: CanvasRenderingContext2D, w: number, h: number, fixed: boolean, startX = 0, startY = 0) => { const gridSize = 20; const sX = Math.floor(startX / gridSize) * gridSize; const sY = Math.floor(startY / gridSize) * gridSize; ctx.beginPath(); ctx.strokeStyle = theme === 'dark' ? \"rgba(255,255,255,0.1)\" : \"rgba(0,0,0,0.05)\"; ctx.lineWidth = 1 / zoom; const finalX = fixed ? w : sX + w + gridSize; const finalY = fixed ? h : sY + h + gridSize; for (let x = (fixed ? 0 : sX); x <= finalX; x += gridSize) { ctx.moveTo(x, (fixed ? 0 : sY)); ctx.lineTo(x, finalY) } for (let y = (fixed ? 0 : sY); y <= finalY; y += gridSize) { ctx.moveTo((fixed ? 0 : sX), y); ctx.lineTo(finalX, y) } ctx.stroke() }\n  const renderPath = (ctx: CanvasRenderingContext2D, obj: CanvasObject) => { const data = obj.data as PathData; if (data.points.length < 2) return; ctx.globalAlpha = data.opacity; ctx.strokeStyle = data.strokeColor; ctx.lineWidth = data.strokeWidth; ctx.lineCap = \"round\"; ctx.lineJoin = \"round\"; ctx.setLineDash([]); ctx.beginPath(); ctx.moveTo(data.points[0].x, data.points[0].y); for (let i = 1; i < data.points.length; i++) ctx.lineTo(data.points[i].x, data.points[i].y); ctx.stroke() }\n  const renderShape = (ctx: CanvasRenderingContext2D, obj: CanvasObject) => { const data = obj.data as ShapeData; ctx.globalAlpha = data.opacity; ctx.setLineDash([]); let lineWidth = data.strokeWidth; if (data.borderType === 'dashed') ctx.setLineDash([10, 10]); if (data.borderType === 'dotted') ctx.setLineDash([3, 5]); if (data.borderType === 'bold') lineWidth = data.strokeWidth * 2; if (data.borderType === 'none') lineWidth = 0; ctx.lineWidth = lineWidth; ctx.strokeStyle = data.strokeColor; ctx.fillStyle = data.fillColor; ctx.beginPath(); const w = data.width, h = data.height; switch (data.shapeType) { case \"rectangle\": ctx.rect(0, 0, w, h); break; case \"rounded_rectangle\": ctx.roundRect(0, 0, w, h, Math.min(w, h) * 0.2); break; case \"ellipse\": ctx.ellipse(w / 2, h / 2, Math.abs(w) / 2, Math.abs(h) / 2, 0, 0, Math.PI * 2); break; case \"circle\": ctx.ellipse(w / 2, h / 2, Math.min(Math.abs(w), Math.abs(h)) / 2, Math.min(Math.abs(w), Math.abs(h)) / 2, 0, 0, Math.PI * 2); break; case \"line\": ctx.moveTo(0, 0); ctx.lineTo(w, h); break; case \"triangle\": ctx.moveTo(w / 2, 0); ctx.lineTo(w, h); ctx.lineTo(0, h); ctx.closePath(); break; case \"arrow\": { const head = Math.min(Math.abs(w), Math.abs(h)) * 0.3; ctx.moveTo(0, h/3); ctx.lineTo(w-head, h/3); ctx.lineTo(w-head, 0); ctx.lineTo(w, h/2); ctx.lineTo(w-head, h); ctx.lineTo(w-head, h*2/3); ctx.lineTo(0, h*2/3); ctx.closePath(); break; } case \"star\": { const cx = w/2, cy = h/2, or = Math.min(w, h)/2, ir = or/2.5; for(let i=0; i<10; i++) { const r = i%2===0 ? or : ir; const a = (Math.PI/5)*i - Math.PI/2; i===0 ? ctx.moveTo(cx+Math.cos(a)*r, cy+Math.sin(a)*r) : ctx.lineTo(cx+Math.cos(a)*r, cy+Math.sin(a)*r); } ctx.closePath(); break; } case \"cloud\": { ctx.moveTo(w*0.2, h*0.5); ctx.bezierCurveTo(w*0.1, h*0.3, w*0.3, h*0.1, w*0.4, h*0.3); ctx.bezierCurveTo(w*0.5, h*0.1, w*0.7, h*0.2, w*0.7, h*0.4); ctx.bezierCurveTo(w*0.9, h*0.3, w, h*0.6, w*0.8, h*0.8); ctx.bezierCurveTo(w*0.9, h, w*0.6, h, w*0.5, h*0.9); ctx.bezierCurveTo(w*0.4, h, w*0.1, h*0.9, w*0.2, h*0.7); ctx.bezierCurveTo(0, h*0.7, 0, h*0.5, w*0.2, h*0.5); ctx.closePath(); break; } case \"speech_bubble\": { const br = Math.min(w, h)*0.2; ctx.moveTo(br, 0); ctx.lineTo(w-br, 0); ctx.quadraticCurveTo(w, 0, w, br); ctx.lineTo(w, h-br*2); ctx.quadraticCurveTo(w, h-br, w-br, h-br); ctx.lineTo(w/2+br, h-br); ctx.lineTo(w/2, h); ctx.lineTo(w/2-br, h-br); ctx.lineTo(br, h-br); ctx.quadraticCurveTo(0, h-br, 0, h-br*2); ctx.lineTo(0, br); ctx.quadraticCurveTo(0, 0, br, 0); ctx.closePath(); break; } } if (data.fillColor) ctx.fill(); if (data.borderType !== 'none') ctx.stroke() }\n  const renderText = (ctx: CanvasRenderingContext2D, obj: CanvasObject) => { const data = obj.data as TextData; ctx.font = `${data.fontSize}px ${data.fontFamily}`; ctx.fillStyle = data.color; ctx.textBaseline = \"top\"; ctx.textAlign = data.align || \"left\"; ctx.setLineDash([]); const lines = data.content.split(\"\\n\"); const lineHeight = data.fontSize * 1.2; let xOffset = 0; if (data.align === \"center\") xOffset = data.width / 2; if (data.align === \"right\") xOffset = data.width; lines.forEach((line, i) => ctx.fillText(line, xOffset, i * lineHeight)) }\n  const renderNote = (ctx: CanvasRenderingContext2D, obj: CanvasObject) => { \n    const data = obj.data as NoteData; \n    ctx.fillStyle = data.color; \n    ctx.fillRect(0, 0, data.width, data.height); \n    ctx.fillStyle = data.textColor || \"#000000\"; \n    ctx.font = `${data.fontSize || 14}px ${data.fontFamily || 'Inter'}, sans-serif`; \n    ctx.textBaseline = \"top\"; \n    ctx.setLineDash([]); \n    ctx.textAlign = data.align || 'left'; \n    const padding = 16; \n    const lines = data.content.split(\"\\n\"); \n    let x = padding; \n    if (data.align === 'center') x = data.width / 2; \n    if (data.align === 'right') x = data.width - padding; \n    \n    // Vertical Align Logic\n    const lineHeight = (data.fontSize || 14) * 1.2;\n    const totalTextHeight = lines.length * lineHeight;\n    let startY = padding;\n    if (data.verticalAlign === 'center') startY = (data.height - totalTextHeight) / 2;\n    if (data.verticalAlign === 'bottom') startY = data.height - totalTextHeight - padding;\n\n    lines.forEach((line, i) => ctx.fillText(line, x, startY + i * lineHeight, data.width - padding * 2)) \n  }\n  const renderImage = (ctx: CanvasRenderingContext2D, obj: CanvasObject) => { const data = obj.data as ImageData; ctx.globalAlpha = data.opacity; ctx.globalCompositeOperation = (data.blendMode && data.blendMode !== 'normal') ? data.blendMode : 'source-over'; ctx.setLineDash([]); if (data.src && !data.src.startsWith('/placeholder')) { let img = imageCache.current[data.src]; if (!img) { img = new Image(); img.src = data.src; img.onload = () => renderCanvas(); imageCache.current[data.src] = img; } if (img.complete && img.naturalWidth > 0) { ctx.drawImage(img, 0, 0, data.width, data.height); return; } } ctx.fillStyle = \"#e0e0e0\"; ctx.fillRect(0, 0, data.width, data.height); ctx.strokeStyle = \"#999999\"; ctx.lineWidth = 2; ctx.strokeRect(0, 0, data.width, data.height); ctx.fillStyle = \"#666666\"; ctx.font = \"48px sans-serif\"; ctx.textAlign = \"center\"; ctx.textBaseline = \"middle\"; ctx.fillText(\"🖼️\", data.width / 2, data.height / 2) }\n\n  const renderSelection = (ctx: CanvasRenderingContext2D, obj: CanvasObject) => {\n    if (!showTransformHandles) return\n    const { width, height } = getObjectSize(obj); const anchor = getAnchorOffset(obj, width, height); const handleSize = 8 / zoom\n    ctx.save(); ctx.translate(obj.transform.x + anchor.x * obj.transform.scaleX, obj.transform.y + anchor.y * obj.transform.scaleY); ctx.rotate((obj.transform.rotation * Math.PI) / 180); ctx.scale(obj.transform.scaleX, obj.transform.scaleY); ctx.translate(-anchor.x, -anchor.y)\n    ctx.strokeStyle = highlightColor; ctx.lineWidth = 2 / Math.max(Math.abs(obj.transform.scaleX), Math.abs(obj.transform.scaleY)) / zoom; ctx.strokeRect(0, 0, width, height)\n    const hSizeX = handleSize / obj.transform.scaleX; const hSizeY = handleSize / obj.transform.scaleY; ctx.fillStyle = \"#FFFFFF\"; ctx.strokeStyle = highlightColor; ctx.lineWidth = 1 / zoom\n    const drawHandle = (x: number, y: number) => { ctx.fillRect(x - hSizeX/2, y - hSizeY/2, hSizeX, hSizeY); ctx.strokeRect(x - hSizeX/2, y - hSizeY/2, hSizeX, hSizeY) }; drawHandle(0, 0); drawHandle(width, 0); drawHandle(width, height); drawHandle(0, height)\n    const rotHandleY = - (30 / obj.transform.scaleY / zoom); ctx.beginPath(); ctx.moveTo(width / 2, 0); ctx.lineTo(width / 2, rotHandleY); ctx.stroke(); ctx.beginPath(); ctx.arc(width / 2, rotHandleY, Math.abs(hSizeX/1.5), 0, Math.PI * 2); ctx.fill(); ctx.stroke()\n    ctx.beginPath(); ctx.moveTo(anchor.x - 5/zoom/obj.transform.scaleX, anchor.y); ctx.lineTo(anchor.x + 5/zoom/obj.transform.scaleX, anchor.y); ctx.moveTo(anchor.x, anchor.y - 5/zoom/obj.transform.scaleY); ctx.lineTo(anchor.x, anchor.y + 5/zoom/obj.transform.scaleY); ctx.strokeStyle = '#0A84FF'; ctx.lineWidth = 2/zoom; ctx.stroke()\n    ctx.restore()\n  }\n\n  // --- Interaction Logic ---\n  const getCanvasPoint = (e: React.MouseEvent) => { const canvas = canvasRef.current; if (!canvas) return { x: 0, y: 0 }; const rect = canvas.getBoundingClientRect(); return { x: (e.clientX - rect.left - panX) / zoom, y: (e.clientY - rect.top - panY) / zoom } }\n  const getClickType = (point: Point, obj: CanvasObject): 'tl'|'tr'|'bl'|'br'|'rot'|'body'|'none' => { \n    const { width, height } = getObjectSize(obj)\n    const anchor = getAnchorOffset(obj, width, height)\n    const handleSize = 8 / zoom / Math.min(Math.abs(obj.transform.scaleX), Math.abs(obj.transform.scaleY))\n    const pivotX = obj.transform.x + anchor.x * obj.transform.scaleX\n    const pivotY = obj.transform.y + anchor.y * obj.transform.scaleY\n    const dx = point.x - pivotX; const dy = point.y - pivotY\n    const rad = -obj.transform.rotation * (Math.PI / 180)\n    const lx = (dx * Math.cos(rad) - dy * Math.sin(rad)) / obj.transform.scaleX\n    const ly = (dx * Math.sin(rad) + dy * Math.cos(rad)) / obj.transform.scaleY\n    const localX = lx + anchor.x; const localY = ly + anchor.y\n    const rotHandleY = - (30 / obj.transform.scaleY / zoom)\n    if (Math.abs(localX - width/2) < handleSize && Math.abs(localY - rotHandleY) < handleSize) return 'rot'\n    if (Math.abs(localX - 0) < handleSize && Math.abs(localY - 0) < handleSize) return 'tl'\n    if (Math.abs(localX - width) < handleSize && Math.abs(localY - 0) < handleSize) return 'tr'\n    if (Math.abs(localX - 0) < handleSize && Math.abs(localY - height) < handleSize) return 'bl'\n    if (Math.abs(localX - width) < handleSize && Math.abs(localY - height) < handleSize) return 'br'\n    if (localX >= 0 && localX <= width && localY >= 0 && localY <= height) return 'body'\n    return 'none' \n  }\n\n  const handleEraser = (point: Point) => {\n    const radius = brushSettings.size / zoom / 2\n    if (brushSettings.eraserMode === 'object') {\n      const hitObject = [...objects].reverse().find(obj => {\n        const layer = layers.find(l => l.id === obj.layerId); if (!layer || !layer.visible || layer.locked) return false\n        return getClickType(point, obj) !== 'none'\n      })\n      if (hitObject) deleteObject(hitObject.id)\n    } else {\n      objects.forEach(obj => {\n        if (obj.type === 'path') {\n          const data = obj.data as PathData; const originalPoints = data.points; const newSegments: Point[][] = []; let currentSegment: Point[] = []; let hasSplit = false\n          for (let i = 0; i < originalPoints.length; i++) {\n            const p = originalPoints[i]; const gx = obj.transform.x + p.x; const gy = obj.transform.y + p.y; const distSq = (gx - point.x)**2 + (gy - point.y)**2\n            if (distSq > radius**2) { currentSegment.push(p) } else { hasSplit = true; if (currentSegment.length > 0) { newSegments.push(currentSegment); currentSegment = [] } }\n          }\n          if (currentSegment.length > 0) newSegments.push(currentSegment)\n          if (hasSplit) { deleteObject(obj.id); newSegments.forEach((seg, idx) => { if (seg.length < 2) return; addObject({ ...obj, id: `path-split-${obj.id}-${Date.now()}-${idx}`, data: { ...data, points: seg } }) }) }\n        }\n      })\n    }\n  }\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    if (e.button === 1 || (e.button === 0 && e.spaceKey)) { setIsPanning(true); return }\n    const point = getCanvasPoint(e); dragStartRef.current = point; currentMousePosRef.current = point\n    if (activeTool === \"select\" && selectedIds.length === 1) { const obj = objects.find(o => o.id === selectedIds[0]); if (obj) { const clickType = getClickType(point, obj); if (clickType !== 'none' && clickType !== 'body') { interactionModeRef.current = clickType === 'rot' ? 'rotating' : 'resizing'; setInteractionMode(clickType === 'rot' ? 'rotating' : 'resizing'); activeHandleRef.current = clickType; initialObjectStateRef.current = JSON.parse(JSON.stringify(obj)); return } } }\n    switch (activeTool) {\n      case \"select\": const clickedObject = [...objects].reverse().find((obj) => { const layer = layers.find(l => l.id === obj.layerId); if (!layer || !layer.visible || layer.locked) return false; return getClickType(point, obj) !== 'none' }); if (clickedObject) { if (e.shiftKey) { if (selectedIds.includes(clickedObject.id)) setSelectedIds(selectedIds.filter(id => id !== clickedObject.id)); else setSelectedIds([...selectedIds, clickedObject.id]) } else { if (!selectedIds.includes(clickedObject.id)) setSelectedIds([clickedObject.id]) } interactionModeRef.current = 'moving'; setInteractionMode('moving'); initialObjectsMapRef.current.clear(); const ids = e.shiftKey && selectedIds.includes(clickedObject.id) ? selectedIds : [clickedObject.id]; ids.forEach(id => { const o = objects.find(obj => obj.id === id); if (o) initialObjectsMapRef.current.set(id, JSON.parse(JSON.stringify(o))) }); if (!initialObjectsMapRef.current.has(clickedObject.id)) initialObjectsMapRef.current.set(clickedObject.id, JSON.parse(JSON.stringify(clickedObject))) } else { if (!e.shiftKey) setSelectedIds([]); interactionModeRef.current = 'selecting'; setInteractionMode('selecting'); dragStartRef.current = point; setCurrentMousePos(point) } break;\n      case \"brush\": interactionModeRef.current = 'drawing'; setInteractionMode('drawing'); setIsDrawing(true); setCurrentPath([point]); break;\n      case \"shape\": interactionModeRef.current = 'drawing'; setInteractionMode('drawing'); setIsDrawing(true); startPointRef.current = point; setStartPoint(point); break;\n      case \"eraser\": interactionModeRef.current = 'drawing'; setInteractionMode('drawing'); setIsDrawing(true); setCurrentMousePos(point); handleEraser(point); break;\n      case \"text\": addObject({ id: `text-${Date.now()}`, type: \"text\", layerId: activeLayerId, transform: { x: point.x, y: point.y, rotation: 0, scaleX: 1, scaleY: 1, anchor: \"center\" }, data: { content: t(\"clickToEdit\"), fontFamily: \"Inter\", fontSize: 24, color: \"#000000\", width: 200, height: 30, align: \"left\" } }); setActiveTool('select'); break;\n      case \"note\": addObject({ id: `note-${Date.now()}`, type: \"note\", layerId: activeLayerId, transform: { x: point.x, y: point.y, rotation: Math.random() * 4 - 2, scaleX: 1, scaleY: 1, anchor: \"center\" }, data: { content: t(\"newNote\"), width: 200, height: 200, color: \"#FFF2CC\", textColor: \"#000000\", fontFamily: \"Inter\", fontSize: 14, align: \"left\", verticalAlign: \"top\" } }); setActiveTool('select'); break;\n      case \"image\": addObject({ id: `image-${Date.now()}`, type: \"image\", layerId: activeLayerId, transform: { x: point.x, y: point.y, rotation: 0, scaleX: 1, scaleY: 1, anchor: \"center\" }, data: { src: \"/placeholder.svg?height=200&width=200\", width: 200, height: 200, opacity: 1, blendMode: 'normal' } }); setActiveTool('select'); break;\n    }\n  }\n\n  const handleMouseMove = (e: React.MouseEvent) => {\n    const point = getCanvasPoint(e); currentMousePosRef.current = point; setCurrentMousePos(point)\n    if (isPanning) { setPan(panX + e.movementX, panY + e.movementY); return }\n    const mode = interactionModeRef.current\n    if (mode === 'drawing' && activeTool === 'eraser') handleEraser(point)\n    if (mode === 'moving' && dragStartRef.current) { const dx = point.x - dragStartRef.current.x; const dy = point.y - dragStartRef.current.y; initialObjectsMapRef.current.forEach((initObj, id) => { if (objects.some(o => o.id === id)) { updateObject(id, { transform: { ...initObj.transform, x: initObj.transform.x + dx, y: initObj.transform.y + dy } }) } }) }\n    if (mode === 'rotating' && initialObjectStateRef.current) { const obj = initialObjectStateRef.current; const { width, height } = getObjectSize(obj); const anchor = getAnchorOffset(obj, width, height); const pivotX = obj.transform.x + anchor.x * obj.transform.scaleX; const pivotY = obj.transform.y + anchor.y * obj.transform.scaleY; const angle = Math.atan2(point.y - pivotY, point.x - pivotX) * (180 / Math.PI) + 90; updateObject(obj.id, { transform: { ...obj.transform, rotation: angle } }) }\n    \n    if (mode === 'resizing' && initialObjectStateRef.current && activeHandleRef.current && dragStartRef.current) { \n        const obj = initialObjectStateRef.current\n        const { width, height } = getObjectSize(obj)\n        \n        const dx = point.x - dragStartRef.current.x\n        const dy = point.y - dragStartRef.current.y\n        \n        const rad = -obj.transform.rotation * (Math.PI / 180)\n        const localDx = dx * Math.cos(rad) - dy * Math.sin(rad)\n        const localDy = dx * Math.sin(rad) + dy * Math.cos(rad)\n\n        let scaleX = obj.transform.scaleX\n        let scaleY = obj.transform.scaleY\n        \n        const safeWidth = width === 0 ? 100 : width\n        const safeHeight = height === 0 ? 100 : height\n\n        if (activeHandleRef.current.includes('r')) scaleX = obj.transform.scaleX + (localDx / safeWidth) * obj.transform.scaleX\n        if (activeHandleRef.current.includes('l')) scaleX = obj.transform.scaleX - (localDx / safeWidth) * obj.transform.scaleX\n        if (activeHandleRef.current.includes('b')) scaleY = obj.transform.scaleY + (localDy / safeHeight) * obj.transform.scaleY\n        if (activeHandleRef.current.includes('t')) scaleY = obj.transform.scaleY - (localDy / safeHeight) * obj.transform.scaleY\n\n        const isCorner = activeHandleRef.current.length === 2\n        if (!e.shiftKey && isCorner) {\n           const ratio = Math.max(Math.abs(scaleX/obj.transform.scaleX), Math.abs(scaleY/obj.transform.scaleY))\n           const signX = Math.sign(scaleX) || 1\n           const signY = Math.sign(scaleY) || 1\n           scaleX = obj.transform.scaleX * ratio * signX\n           scaleY = obj.transform.scaleY * ratio * signY\n        }\n        updateObject(obj.id, { transform: { ...obj.transform, scaleX, scaleY } }) \n    }\n\n    if (mode === 'drawing' && activeTool === 'brush') {\n      let newPoint = point\n      if (e.shiftKey && currentPath.length > 0) {\n        const start = currentPath[0]\n        const dx = Math.abs(point.x - start.x)\n        const dy = Math.abs(point.y - start.y)\n        \n        if (dx > dy) {\n          newPoint = { x: point.x, y: start.y }\n        } else {\n          newPoint = { x: start.x, y: point.y }\n        }\n      }\n      setCurrentPath(p => [...p, newPoint])\n    }\n    \n    if (mode === 'selecting' || (mode === 'drawing' && activeTool === 'shape')) setInteractionMode(prev => prev)\n  }\n\n  const handleMouseUp = (e: React.MouseEvent) => {\n    if (isPanning) { setIsPanning(false); return }\n    const point = getCanvasPoint(e); const mode = interactionModeRef.current\n    if (mode === 'selecting' && dragStartRef.current) { const x1 = Math.min(dragStartRef.current.x, point.x); const y1 = Math.min(dragStartRef.current.y, point.y); const x2 = Math.max(dragStartRef.current.x, point.x); const y2 = Math.max(dragStartRef.current.y, point.y); const ids: string[] = []; objects.forEach(obj => { const layer = layers.find(l => l.id === obj.layerId); if (!layer || !layer.visible || layer.locked) return; const { width, height } = getObjectSize(obj); const ox = obj.transform.x; const oy = obj.transform.y; if (ox < x2 && ox + width > x1 && oy < y2 && oy + height > y1) ids.push(obj.id) }); setSelectedIds(ids) }\n    if (mode === 'drawing' && activeTool === 'brush' && currentPath.length > 1) { const xs = currentPath.map(p => p.x); const ys = currentPath.map(p => p.y); const minX = Math.min(...xs); const minY = Math.min(...ys); const norm = currentPath.map(p => ({ x: p.x - minX, y: p.y - minY })); addObject({ id: `path-${Date.now()}`, type: \"path\", layerId: activeLayerId, transform: { x: minX, y: minY, rotation: 0, scaleX: 1, scaleY: 1, anchor: \"center\" }, data: { points: norm, strokeColor: brushSettings.color, strokeWidth: brushSettings.size, opacity: brushSettings.opacity } }); setCurrentPath([]) }\n    if (mode === 'drawing' && activeTool === 'shape' && startPointRef.current) { const rawW = point.x - startPointRef.current.x; const rawH = point.y - startPointRef.current.y; const w = Math.abs(rawW); const h = Math.abs(rawH); const x = rawW < 0 ? point.x : startPointRef.current.x; const y = rawH < 0 ? point.y : startPointRef.current.y; if (w > 5 && h > 5) { addObject({ id: `shape-${Date.now()}`, type: \"shape\", layerId: activeLayerId, transform: { x, y, rotation: 0, scaleX: 1, scaleY: 1, anchor: \"center\" }, data: { shapeType: shapeSettings.shapeType, width: w, height: h, fillColor: shapeSettings.fillColor, strokeColor: shapeSettings.strokeColor, strokeWidth: shapeSettings.strokeWidth, borderType: shapeSettings.borderType, opacity: shapeSettings.opacity } }); setActiveTool('select') } startPointRef.current = null; setStartPoint(null) }\n    interactionModeRef.current = 'none'; activeHandleRef.current = null; dragStartRef.current = null; initialObjectStateRef.current = null; initialObjectsMapRef.current.clear(); setInteractionMode('none'); setIsDrawing(false); activeHandleRef.current = null; dragStartRef.current = null\n  }\n\n  const handleDoubleClick = (e: React.MouseEvent) => { \n    const point = getCanvasPoint(e); \n    const clickedObject = [...objects].reverse().find((obj) => { \n      const layer = layers.find(l => l.id === obj.layerId); \n      if (!layer || !layer.visible || layer.locked) return false; \n      return getClickType(point, obj) !== 'none' \n    }); \n    \n    if (clickedObject && (clickedObject.type === \"text\" || clickedObject.type === \"note\")) { \n      setEditingTextId(clickedObject.id); \n      const data = clickedObject.data as (TextData | NoteData); \n      \n      const isPlaceholder = \n        (clickedObject.type === 'text' && (data.content === t(\"clickToEdit\") || data.content === \"Click to edit\")) ||\n        (clickedObject.type === 'note' && (data.content === t(\"newNote\") || data.content === \"New note\"));\n        \n      setEditText(isPlaceholder ? \"\" : data.content) \n    } \n  }\n  \n  const handleTextBlur = () => { if (editingTextId) { const obj = objects.find(o => o.id === editingTextId); if (obj) { const newData = { ...obj.data, content: editText }; updateObject(obj.id, { data: newData as any }) } setEditingTextId(null) } }\n  const handleWheel = (e: React.WheelEvent) => { if (e.ctrlKey || e.metaKey) { e.preventDefault(); const delta = e.deltaY > 0 ? 0.9 : 1.1; setZoom(zoom * delta) } else { if(e.deltaY !== 0) setPan(panX - e.deltaX, panY - e.deltaY) } }\n  useEffect(() => { const handleMouseEvent = (e: MouseEvent) => { (window as any).lastMouseEvent = e }; window.addEventListener(\"mousemove\", handleMouseEvent); return () => window.removeEventListener(\"mousemove\", handleMouseEvent) }, [])\n  \n  useEffect(() => { \n    const handleKeyDown = (e: KeyboardEvent) => { \n      const tagName = (e.target as HTMLElement).tagName; if (tagName === 'INPUT' || tagName === 'TEXTAREA') return\n      \n      const key = e.key.toLowerCase()\n      if (!e.metaKey && !e.ctrlKey) { \n        if (key === keybindings.select) setActiveTool('select');\n        else if (key === keybindings.brush) setActiveTool('brush');\n        else if (key === keybindings.eraser) setActiveTool('eraser');\n        else if (key === keybindings.image) setActiveTool('image');\n        else if (key === keybindings.shape) setActiveTool('shape');\n        else if (key === keybindings.note) setActiveTool('note');\n        else if (key === keybindings.text) setActiveTool('text');\n      } \n      \n      if ((e.ctrlKey || e.metaKey) && key === \"z\" && !e.shiftKey) { e.preventDefault(); useHaloboardStore.getState().undo() } \n      if ((e.ctrlKey || e.metaKey) && (key === \"y\" || (key === \"z\" && e.shiftKey))) { e.preventDefault(); useHaloboardStore.getState().redo() } \n      \n      if (e.key === \"Delete\" || e.key === \"Backspace\") { const { selectedIds, deleteObject } = useHaloboardStore.getState(); selectedIds.forEach((id) => deleteObject(id)) } \n      if ((e.ctrlKey || e.metaKey) && e.key === 'c') { useHaloboardStore.getState().copy() } \n      if ((e.ctrlKey || e.metaKey) && e.key === 'v') { useHaloboardStore.getState().paste() } \n      if ((e.ctrlKey || e.metaKey) && e.key === 'd') { e.preventDefault(); useHaloboardStore.getState().duplicate() } \n    }; window.addEventListener(\"keydown\", handleKeyDown); return () => window.removeEventListener(\"keydown\", handleKeyDown) \n  }, [keybindings])\n\n  const renderTextEditor = () => {\n    if (!editingTextId) return null\n    const obj = objects.find(o => o.id === editingTextId); if (!obj) return null\n    const data = obj.data as (TextData | NoteData); const { width, height } = getObjectSize(obj); const anchor = getAnchorOffset(obj, width, height)\n    const screenX = (obj.transform.x - anchor.x * obj.transform.scaleX) * zoom + panX + (containerRef.current?.getBoundingClientRect().left || 0)\n    const screenY = (obj.transform.y - anchor.y * obj.transform.scaleY) * zoom + panY + (containerRef.current?.getBoundingClientRect().top || 0)\n    const textColor = obj.type === 'note' ? ((data as NoteData).textColor || '#000') : (data as TextData).color\n    const style: React.CSSProperties = { position: 'absolute', left: screenX, top: screenY, width: width * zoom * obj.transform.scaleX, height: height * zoom * obj.transform.scaleY, fontSize: (data.fontSize || 14) * zoom * obj.transform.scaleY, fontFamily: (data as any).fontFamily || 'Inter', color: textColor, backgroundColor: obj.type === 'note' ? (data as NoteData).color : 'transparent', border: 'none', padding: obj.type === 'note' ? 16 * zoom : 0, zIndex: 100, resize: 'none', outline: 'none', textAlign: (data as any).align || 'left', overflow: 'hidden', lineHeight: '1.2' }\n    \n    return (\n      <textarea \n        ref={textAreaRef} \n        value={editText} \n        onChange={(e) => setEditText(e.target.value)} \n        onBlur={handleTextBlur} \n        style={style} \n        autoFocus \n        onKeyDown={(e) => { \n          if (e.key === \"Escape\") {\n            handleTextBlur();\n            return;\n          }\n          if (e.key === \"Enter\" && !e.shiftKey) {\n            e.preventDefault();\n            handleTextBlur();\n          }\n        }} \n      />\n    )\n  }\n\n  return <div ref={containerRef} className=\"absolute inset-0 w-full h-full overflow-hidden\"><canvas ref={canvasRef} className=\"block w-full h-full cursor-crosshair\" onMouseDown={handleMouseDown} onMouseMove={handleMouseMove} onMouseUp={handleMouseUp} onMouseLeave={handleMouseUp} onDoubleClick={handleDoubleClick} onWheel={handleWheel} />{renderTextEditor()}</div>\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2083, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/toolbar.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useHaloboardStore } from \"@/lib/store\"\nimport type { ToolType } from \"@/lib/types\"\nimport {\n  MousePointer2,\n  Brush,\n  Eraser,\n  Shapes,\n  Type,\n  StickyNote,\n  ImageIcon,\n} from \"lucide-react\"\nimport { useTranslation } from \"@/lib/i18n\"\n\nexport function Toolbar() {\n  const { activeTool, setActiveTool, highlightColor } = useHaloboardStore()\n  const { t } = useTranslation()\n\n  const tools: { type: ToolType; icon: React.ElementType; label: string }[] = [\n    { type: \"select\", icon: MousePointer2, label: t(\"select\", \"tools\") },\n    { type: \"brush\", icon: Brush, label: t(\"brush\", \"tools\") },\n    { type: \"eraser\", icon: Eraser, label: t(\"eraser\", \"tools\") },\n    { type: \"shape\", icon: Shapes, label: t(\"shape\", \"tools\") },\n    { type: \"text\", icon: Type, label: t(\"text\", \"tools\") },\n    { type: \"note\", icon: StickyNote, label: t(\"note\", \"tools\") },\n    { type: \"image\", icon: ImageIcon, label: t(\"image\", \"tools\") },\n  ]\n\n  return (\n    <aside className=\"fixed left-4 top-1/2 z-30 -translate-y-1/2\">\n      <div className=\"flex flex-col gap-1 rounded-xl border border-white/20 bg-white/60 p-1.5 shadow-lg backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/60\">\n        {/* Logo/Brand */}\n        <div className=\"mb-2 flex items-center justify-center\">\n          <div \n            className=\"flex size-10 items-center justify-center rounded-full\"\n            style={{ background: `linear-gradient(135deg, ${highlightColor}, ${highlightColor}dd)` }}\n          >\n            {/* Updated Logo: Palette Round */}\n            <img \n              src=\"https://www.svgrepo.com/show/529121/palette-round.svg\" \n              alt=\"Haloboard\" \n              className=\"size-6 brightness-0 invert\" \n            />\n          </div>\n        </div>\n\n        {/* Tools */}\n        {tools.map(({ type, icon: Icon, label }) => {\n          const isActive = activeTool === type\n          \n          return (\n            <button\n              key={type}\n              onClick={() => setActiveTool(type)}\n              className={`group relative flex size-12 items-center justify-center rounded-lg transition-all duration-200 ${\n                !isActive ? \"text-neutral-700 hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/10\" : \"text-white\"\n              }`}\n              style={isActive ? { \n                backgroundColor: highlightColor,\n                boxShadow: `0 4px 12px -2px ${highlightColor}66`\n              } : undefined}\n              title={label}\n            >\n              <Icon className=\"size-5\" />\n              <span className=\"pointer-events-none absolute left-full ml-4 whitespace-nowrap rounded-md bg-neutral-800 px-3 py-1.5 text-sm font-medium text-white opacity-0 shadow-md transition-opacity duration-200 group-hover:opacity-100\">\n                {label}\n              </span>\n            </button>\n          )\n        })}\n      </div>\n    </aside>\n  )\n}"],"names":[],"mappings":";;;;;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;;;AAfA;;;;AAiBO,SAAS;;IACd,MAAM,EAAE,UAAU,EAAE,aAAa,EAAE,cAAc,EAAE,GAAG,IAAA,oIAAiB;IACvE,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,gIAAc;IAE5B,MAAM,QAAsE;QAC1E;YAAE,MAAM;YAAU,MAAM,gPAAa;YAAE,OAAO,EAAE,UAAU;QAAS;QACnE;YAAE,MAAM;YAAS,MAAM,gNAAK;YAAE,OAAO,EAAE,SAAS;QAAS;QACzD;YAAE,MAAM;YAAU,MAAM,mNAAM;YAAE,OAAO,EAAE,UAAU;QAAS;QAC5D;YAAE,MAAM;YAAS,MAAM,mNAAM;YAAE,OAAO,EAAE,SAAS;QAAS;QAC1D;YAAE,MAAM;YAAQ,MAAM,6MAAI;YAAE,OAAO,EAAE,QAAQ;QAAS;QACtD;YAAE,MAAM;YAAQ,MAAM,mOAAU;YAAE,OAAO,EAAE,QAAQ;QAAS;QAC5D;YAAE,MAAM;YAAS,MAAM,wNAAS;YAAE,OAAO,EAAE,SAAS;QAAS;KAC9D;IAED,qBACE,6LAAC;QAAM,WAAU;kBACf,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,YAAY,CAAC,wBAAwB,EAAE,eAAe,EAAE,EAAE,eAAe,GAAG,CAAC;wBAAC;kCAGvF,cAAA,6LAAC;4BACC,KAAI;4BACJ,KAAI;4BACJ,WAAU;;;;;;;;;;;;;;;;gBAMf,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE;oBACrC,MAAM,WAAW,eAAe;oBAEhC,qBACE,6LAAC;wBAEC,SAAS,IAAM,cAAc;wBAC7B,WAAW,CAAC,+FAA+F,EACzG,CAAC,WAAW,mFAAmF,cAC/F;wBACF,OAAO,WAAW;4BAChB,iBAAiB;4BACjB,WAAW,CAAC,gBAAgB,EAAE,eAAe,EAAE,CAAC;wBAClD,IAAI;wBACJ,OAAO;;0CAEP,6LAAC;gCAAK,WAAU;;;;;;0CAChB,6LAAC;gCAAK,WAAU;0CACb;;;;;;;uBAbE;;;;;gBAiBX;;;;;;;;;;;;AAIR;GA3DgB;;QACwC,oIAAiB;QACzD,gIAAc;;;KAFd"}},
    {"offset": {"line": 2236, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 2254, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,2KAAI,GAAG;IAE9B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAnBS"}},
    {"offset": {"line": 2319, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/invite-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport { Share2, X, WifiOff } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\n\ninterface InviteModalProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\nexport function InviteModal({ isOpen, onClose }: InviteModalProps) {\n  if (!isOpen) return null\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n      <div className=\"relative w-full max-w-md rounded-xl border border-white/20 bg-white/95 p-6 shadow-2xl backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/95\">\n        {/* Close Button */}\n        <button\n          onClick={onClose}\n          className=\"absolute right-4 top-4 rounded-lg p-1 hover:bg-black/5 dark:hover:bg-white/5\"\n        >\n          <X className=\"size-5 text-neutral-600 dark:text-neutral-400\" />\n        </button>\n\n        <div className=\"flex flex-col items-center gap-4 text-center\">\n          <div className=\"flex size-16 items-center justify-center rounded-full bg-neutral-100 dark:bg-neutral-800\">\n            <WifiOff className=\"size-8 text-neutral-500\" />\n          </div>\n          \n          <div className=\"space-y-2\">\n            <h2 className=\"text-xl font-bold text-neutral-800 dark:text-neutral-200\">\n              Offline Mode\n            </h2>\n            <p className=\"text-sm text-neutral-600 dark:text-neutral-400\">\n              Online collaboration and autosave are currently disabled to improve performance.\n            </p>\n          </div>\n\n          <Button \n            onClick={onClose}\n            className=\"mt-4 w-full bg-[#0A84FF] hover:bg-[#0A84FF]/90\"\n          >\n            Close\n          </Button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AAHA;;;;AAUO,SAAS,YAAY,EAAE,MAAM,EAAE,OAAO,EAAoB;IAC/D,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBACC,SAAS;oBACT,WAAU;8BAEV,cAAA,6LAAC,oMAAC;wBAAC,WAAU;;;;;;;;;;;8BAGf,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;sCACb,cAAA,6LAAC,0NAAO;gCAAC,WAAU;;;;;;;;;;;sCAGrB,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAG,WAAU;8CAA2D;;;;;;8CAGzE,6LAAC;oCAAE,WAAU;8CAAiD;;;;;;;;;;;;sCAKhE,6LAAC,wIAAM;4BACL,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX;KAtCgB"}},
    {"offset": {"line": 2432, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/lib/storage.tsx"],"sourcesContent":["// Storage utilities - Autosave Disabled\nimport { useState } from \"react\"\nimport { useHaloboardStore } from \"./store\"\nimport type { CanvasObject } from \"./types\"\n\nexport interface BoardData {\n  objects: CanvasObject[]\n  lastModified: number\n}\n\nexport class StorageManager {\n  constructor() {\n    // Auto-load and Auto-save logic removed to prevent freezing\n  }\n\n  // Added dummy method to prevent crash in Header cleanup\n  public stopAutoSave() {} \n\n  // Manual export functions\n  public exportAsPNG(canvas: HTMLCanvasElement, filename = \"haloboard-export.png\") {\n    try {\n      const dataUrl = canvas.toDataURL(\"image/png\")\n      const link = document.createElement(\"a\")\n      link.download = filename\n      link.href = dataUrl\n      link.click()\n    } catch (error) {\n      console.error(\"Failed to export as PNG\", error)\n    }\n  }\n\n  public exportAsSVG(objects: CanvasObject[], filename = \"haloboard-export.svg\") {\n    console.log(\"SVG Export feature placeholder\")\n  }\n\n  public exportAsJSON(filename = \"haloboard-export.json\") {\n    try {\n      const { objects, layers } = useHaloboardStore.getState()\n      const data = { objects, layers, lastModified: Date.now() }\n      \n      const json = JSON.stringify(data, null, 2)\n      const blob = new Blob([json], { type: \"application/json\" })\n      const url = URL.createObjectURL(blob)\n      const link = document.createElement(\"a\")\n      link.download = filename\n      link.href = url\n      link.click()\n      URL.revokeObjectURL(url)\n    } catch (error) {\n      console.error(\"Failed to export as JSON\", error)\n    }\n  }\n\n  // NEW: Export as custom .tpad format (JSON under the hood)\n  public exportAsTPAD(filename = \"project.tpad\") {\n    try {\n      const { objects, layers, activeLayerId, history } = useHaloboardStore.getState()\n      const data = { \n        version: \"1.0\",\n        timestamp: Date.now(),\n        objects, \n        layers, \n        activeLayerId,\n        history: [] // Optional: Save history or keep file size small\n      }\n      \n      const json = JSON.stringify(data, null, 2)\n      const blob = new Blob([json], { type: \"application/haloboard\" })\n      const url = URL.createObjectURL(blob)\n      const link = document.createElement(\"a\")\n      link.download = filename\n      link.href = url\n      link.click()\n      URL.revokeObjectURL(url)\n    } catch (error) {\n      console.error(\"Failed to export as TPAD\", error)\n    }\n  }\n\n  // NEW: Export as PSD (Fallback to Image for this environment)\n  public exportAsPSD(canvas: HTMLCanvasElement, filename = \"haloboard-export.psd\") {\n    try {\n      // Note: Real layered PSD export requires heavy libraries like ag-psd.\n      // For this environment, we export the flat image with .psd extension \n      // so it can be opened by standard viewers, though it won't have layers.\n      const dataUrl = canvas.toDataURL(\"image/png\")\n      const link = document.createElement(\"a\")\n      link.download = filename\n      link.href = dataUrl\n      link.click()\n      console.log(\"Exported as basic PSD (Flat Image)\")\n    } catch (error) {\n      console.error(\"Failed to export as PSD\", error)\n    }\n  }\n}\n\n// Hook initializes once for manual export access only\nexport function useStorage() {\n  const [manager] = useState(() => new StorageManager())\n  return manager\n}\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;;;AACxC;AACA;;;;AAQO,MAAM;IACX,aAAc;IACZ,4DAA4D;IAC9D;IAEA,wDAAwD;IACjD,eAAe,CAAC;IAEvB,0BAA0B;IACnB,YAAY,MAAyB,EAAE,WAAW,sBAAsB,EAAE;QAC/E,IAAI;YACF,MAAM,UAAU,OAAO,SAAS,CAAC;YACjC,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,QAAQ,GAAG;YAChB,KAAK,IAAI,GAAG;YACZ,KAAK,KAAK;QACZ,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;IACF;IAEO,YAAY,OAAuB,EAAE,WAAW,sBAAsB,EAAE;QAC7E,QAAQ,GAAG,CAAC;IACd;IAEO,aAAa,WAAW,uBAAuB,EAAE;QACtD,IAAI;YACF,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,oIAAiB,CAAC,QAAQ;YACtD,MAAM,OAAO;gBAAE;gBAAS;gBAAQ,cAAc,KAAK,GAAG;YAAG;YAEzD,MAAM,OAAO,KAAK,SAAS,CAAC,MAAM,MAAM;YACxC,MAAM,OAAO,IAAI,KAAK;gBAAC;aAAK,EAAE;gBAAE,MAAM;YAAmB;YACzD,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,QAAQ,GAAG;YAChB,KAAK,IAAI,GAAG;YACZ,KAAK,KAAK;YACV,IAAI,eAAe,CAAC;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF;IAEA,2DAA2D;IACpD,aAAa,WAAW,cAAc,EAAE;QAC7C,IAAI;YACF,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,aAAa,EAAE,OAAO,EAAE,GAAG,oIAAiB,CAAC,QAAQ;YAC9E,MAAM,OAAO;gBACX,SAAS;gBACT,WAAW,KAAK,GAAG;gBACnB;gBACA;gBACA;gBACA,SAAS,EAAE,CAAC,iDAAiD;YAC/D;YAEA,MAAM,OAAO,KAAK,SAAS,CAAC,MAAM,MAAM;YACxC,MAAM,OAAO,IAAI,KAAK;gBAAC;aAAK,EAAE;gBAAE,MAAM;YAAwB;YAC9D,MAAM,MAAM,IAAI,eAAe,CAAC;YAChC,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,QAAQ,GAAG;YAChB,KAAK,IAAI,GAAG;YACZ,KAAK,KAAK;YACV,IAAI,eAAe,CAAC;QACtB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,4BAA4B;QAC5C;IACF;IAEA,8DAA8D;IACvD,YAAY,MAAyB,EAAE,WAAW,sBAAsB,EAAE;QAC/E,IAAI;YACF,sEAAsE;YACtE,sEAAsE;YACtE,wEAAwE;YACxE,MAAM,UAAU,OAAO,SAAS,CAAC;YACjC,MAAM,OAAO,SAAS,aAAa,CAAC;YACpC,KAAK,QAAQ,GAAG;YAChB,KAAK,IAAI,GAAG;YACZ,KAAK,KAAK;YACV,QAAQ,GAAG,CAAC;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;IACF;AACF;AAGO,SAAS;;IACd,MAAM,CAAC,QAAQ,GAAG,IAAA,yKAAQ;+BAAC,IAAM,IAAI;;IACrC,OAAO;AACT;GAHgB"}},
    {"offset": {"line": 2549, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/export-menu.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Download, FileImage, FileType, FileJson, FileBox, Image as ImageIcon } from \"lucide-react\"\nimport { useHaloboardStore } from \"@/lib/store\"\nimport { useStorage } from \"@/lib/storage\"\nimport { useTranslation } from \"@/lib/i18n\"\n\nexport function ExportMenu() {\n  const [isOpen, setIsOpen] = useState(false)\n  const storage = useStorage()\n  const { t } = useTranslation()\n\n  const handleExportPNG = () => {\n    const canvas = document.querySelector(\"canvas\")\n    if (canvas && storage) {\n      storage.exportAsPNG(canvas)\n      setIsOpen(false)\n    }\n  }\n\n  const handleExportSVG = () => {\n    if (storage) {\n      storage.exportAsSVG([]) // Placeholder call\n      setIsOpen(false)\n    }\n  }\n\n  const handleExportJSON = () => {\n    if (storage) {\n      storage.exportAsJSON()\n      setIsOpen(false)\n    }\n  }\n\n  const handleExportTPAD = () => {\n    if (storage) {\n      storage.exportAsTPAD()\n      setIsOpen(false)\n    }\n  }\n\n  const handleExportPSD = () => {\n    const canvas = document.querySelector(\"canvas\")\n    if (canvas && storage) {\n      storage.exportAsPSD(canvas)\n      setIsOpen(false)\n    }\n  }\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center gap-2 rounded-lg bg-white/60 px-3 py-2 text-sm font-medium text-neutral-700 shadow-lg backdrop-blur-xl transition-colors hover:bg-white/80 dark:bg-neutral-900/60 dark:text-neutral-300 dark:hover:bg-neutral-900/80\"\n      >\n        <Download className=\"size-4\" />\n        {t(\"export\")}\n      </button>\n\n      {isOpen && (\n        <>\n          <div className=\"fixed inset-0 z-40\" onClick={() => setIsOpen(false)} />\n          <div className=\"absolute right-0 top-full z-50 mt-2 w-48 rounded-lg border border-white/20 bg-white/90 shadow-xl backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/90\">\n            <div className=\"p-1 space-y-0.5\">\n              <button onClick={handleExportTPAD} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <FileBox className=\"size-4\" />\n                {t(\"exportTPAD\")}\n              </button>\n              <div className=\"h-px bg-neutral-200 dark:bg-neutral-700 my-1\" />\n              <button onClick={handleExportPSD} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <ImageIcon className=\"size-4\" />\n                {t(\"exportPSD\")}\n              </button>\n              <button onClick={handleExportPNG} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <FileImage className=\"size-4\" />\n                {t(\"exportPNG\")}\n              </button>\n              <button onClick={handleExportSVG} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <FileType className=\"size-4\" />\n                {t(\"exportSVG\")}\n              </button>\n              <button onClick={handleExportJSON} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <FileJson className=\"size-4\" />\n                {t(\"exportJSON\")}\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;;AANA;;;;;AAQO,SAAS;;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,UAAU,IAAA,gIAAU;IAC1B,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,gIAAc;IAE5B,MAAM,kBAAkB;QACtB,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,IAAI,UAAU,SAAS;YACrB,QAAQ,WAAW,CAAC;YACpB,UAAU;QACZ;IACF;IAEA,MAAM,kBAAkB;QACtB,IAAI,SAAS;YACX,QAAQ,WAAW,CAAC,EAAE,GAAE,mBAAmB;YAC3C,UAAU;QACZ;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,SAAS;YACX,QAAQ,YAAY;YACpB,UAAU;QACZ;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,SAAS;YACX,QAAQ,YAAY;YACpB,UAAU;QACZ;IACF;IAEA,MAAM,kBAAkB;QACtB,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,IAAI,UAAU,SAAS;YACrB,QAAQ,WAAW,CAAC;YACpB,UAAU;QACZ;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;;kCAEV,6LAAC,yNAAQ;wBAAC,WAAU;;;;;;oBACnB,EAAE;;;;;;;YAGJ,wBACC;;kCACE,6LAAC;wBAAI,WAAU;wBAAqB,SAAS,IAAM,UAAU;;;;;;kCAC7D,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAO,SAAS;oCAAkB,WAAU;;sDAC3C,6LAAC,0NAAO;4CAAC,WAAU;;;;;;wCAClB,EAAE;;;;;;;8CAEL,6LAAC;oCAAI,WAAU;;;;;;8CACf,6LAAC;oCAAO,SAAS;oCAAiB,WAAU;;sDAC1C,6LAAC,gNAAS;4CAAC,WAAU;;;;;;wCACpB,EAAE;;;;;;;8CAEL,6LAAC;oCAAO,SAAS;oCAAiB,WAAU;;sDAC1C,6LAAC,gOAAS;4CAAC,WAAU;;;;;;wCACpB,EAAE;;;;;;;8CAEL,6LAAC;oCAAO,SAAS;oCAAiB,WAAU;;sDAC1C,6LAAC,6NAAQ;4CAAC,WAAU;;;;;;wCACnB,EAAE;;;;;;;8CAEL,6LAAC;oCAAO,SAAS;oCAAkB,WAAU;;sDAC3C,6LAAC,6NAAQ;4CAAC,WAAU;;;;;;wCACnB,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;AAQnB;GApFgB;;QAEE,gIAAU;QACZ,gIAAc;;;KAHd"}},
    {"offset": {"line": 2776, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/auto-save-indicator.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Cloud, CloudOff, Check } from \"lucide-react\"\nimport { useHaloboardStore } from \"@/lib/store\"\n\nexport function AutoSaveIndicator() {\n  const [status, setStatus] = useState<\"saved\" | \"saving\" | \"error\">(\"saved\")\n  const [lastSaved, setLastSaved] = useState<Date>(new Date())\n  const objects = useHaloboardStore((state) => state.objects)\n\n  // Simulate auto-save on changes\n  useEffect(() => {\n    if (objects.length === 0) return\n\n    setStatus(\"saving\")\n\n    const timer = setTimeout(() => {\n      setStatus(\"saved\")\n      setLastSaved(new Date())\n    }, 1000)\n\n    return () => clearTimeout(timer)\n  }, [objects])\n\n  const getTimeAgo = () => {\n    const seconds = Math.floor((Date.now() - lastSaved.getTime()) / 1000)\n\n    if (seconds < 10) return \"Just now\"\n    if (seconds < 60) return `${seconds}s ago`\n\n    const minutes = Math.floor(seconds / 60)\n    if (minutes < 60) return `${minutes}m ago`\n\n    const hours = Math.floor(minutes / 60)\n    return `${hours}h ago`\n  }\n\n  return (\n    <div className=\"flex items-center gap-2 rounded-lg bg-white/60 px-3 py-1.5 text-xs font-medium shadow-lg backdrop-blur-xl dark:bg-neutral-900/60\">\n      {status === \"saving\" && (\n        <>\n          <Cloud className=\"size-3 animate-pulse text-[#0A84FF]\" />\n          <span className=\"text-neutral-600 dark:text-neutral-400\">Saving...</span>\n        </>\n      )}\n\n      {status === \"saved\" && (\n        <>\n          <Check className=\"size-3 text-green-500\" />\n          <span className=\"text-neutral-600 dark:text-neutral-400\">Saved {getTimeAgo()}</span>\n        </>\n      )}\n\n      {status === \"error\" && (\n        <>\n          <CloudOff className=\"size-3 text-red-500\" />\n          <span className=\"text-red-600 dark:text-red-400\">Failed to save</span>\n        </>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AACA;;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAA+B;IACnE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAO,IAAI;IACrD,MAAM,UAAU,IAAA,oIAAiB;wDAAC,CAAC,QAAU,MAAM,OAAO;;IAE1D,gCAAgC;IAChC,IAAA,0KAAS;uCAAC;YACR,IAAI,QAAQ,MAAM,KAAK,GAAG;YAE1B,UAAU;YAEV,MAAM,QAAQ;qDAAW;oBACvB,UAAU;oBACV,aAAa,IAAI;gBACnB;oDAAG;YAEH;+CAAO,IAAM,aAAa;;QAC5B;sCAAG;QAAC;KAAQ;IAEZ,MAAM,aAAa;QACjB,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,KAAK,GAAG,KAAK,UAAU,OAAO,EAAE,IAAI;QAEhE,IAAI,UAAU,IAAI,OAAO;QACzB,IAAI,UAAU,IAAI,OAAO,GAAG,QAAQ,KAAK,CAAC;QAE1C,MAAM,UAAU,KAAK,KAAK,CAAC,UAAU;QACrC,IAAI,UAAU,IAAI,OAAO,GAAG,QAAQ,KAAK,CAAC;QAE1C,MAAM,QAAQ,KAAK,KAAK,CAAC,UAAU;QACnC,OAAO,GAAG,MAAM,KAAK,CAAC;IACxB;IAEA,qBACE,6LAAC;QAAI,WAAU;;YACZ,WAAW,0BACV;;kCACE,6LAAC,gNAAK;wBAAC,WAAU;;;;;;kCACjB,6LAAC;wBAAK,WAAU;kCAAyC;;;;;;;;YAI5D,WAAW,yBACV;;kCACE,6LAAC,gNAAK;wBAAC,WAAU;;;;;;kCACjB,6LAAC;wBAAK,WAAU;;4BAAyC;4BAAO;;;;;;;;;YAInE,WAAW,yBACV;;kCACE,6LAAC,6NAAQ;wBAAC,WAAU;;;;;;kCACpB,6LAAC;wBAAK,WAAU;kCAAiC;;;;;;;;;;;;;;AAK3D;GAxDgB;;QAGE,oIAAiB;;;KAHnB"}},
    {"offset": {"line": 2911, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/ui/dropdown-menu.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu'\nimport { CheckIcon, ChevronRightIcon, CircleIcon } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nfunction DropdownMenu({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Root>) {\n  return <DropdownMenuPrimitive.Root data-slot=\"dropdown-menu\" {...props} />\n}\n\nfunction DropdownMenuPortal({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Portal>) {\n  return (\n    <DropdownMenuPrimitive.Portal data-slot=\"dropdown-menu-portal\" {...props} />\n  )\n}\n\nfunction DropdownMenuTrigger({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Trigger>) {\n  return (\n    <DropdownMenuPrimitive.Trigger\n      data-slot=\"dropdown-menu-trigger\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuContent({\n  className,\n  sideOffset = 4,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Content>) {\n  return (\n    <DropdownMenuPrimitive.Portal>\n      <DropdownMenuPrimitive.Content\n        data-slot=\"dropdown-menu-content\"\n        sideOffset={sideOffset}\n        className={cn(\n          'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md',\n          className,\n        )}\n        {...props}\n      />\n    </DropdownMenuPrimitive.Portal>\n  )\n}\n\nfunction DropdownMenuGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Group>) {\n  return (\n    <DropdownMenuPrimitive.Group data-slot=\"dropdown-menu-group\" {...props} />\n  )\n}\n\nfunction DropdownMenuItem({\n  className,\n  inset,\n  variant = 'default',\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Item> & {\n  inset?: boolean\n  variant?: 'default' | 'destructive'\n}) {\n  return (\n    <DropdownMenuPrimitive.Item\n      data-slot=\"dropdown-menu-item\"\n      data-inset={inset}\n      data-variant={variant}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuCheckboxItem({\n  className,\n  children,\n  checked,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.CheckboxItem>) {\n  return (\n    <DropdownMenuPrimitive.CheckboxItem\n      data-slot=\"dropdown-menu-checkbox-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      checked={checked}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CheckIcon className=\"size-4\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.CheckboxItem>\n  )\n}\n\nfunction DropdownMenuRadioGroup({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioGroup>) {\n  return (\n    <DropdownMenuPrimitive.RadioGroup\n      data-slot=\"dropdown-menu-radio-group\"\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuRadioItem({\n  className,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.RadioItem>) {\n  return (\n    <DropdownMenuPrimitive.RadioItem\n      data-slot=\"dropdown-menu-radio-item\"\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      <span className=\"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center\">\n        <DropdownMenuPrimitive.ItemIndicator>\n          <CircleIcon className=\"size-2 fill-current\" />\n        </DropdownMenuPrimitive.ItemIndicator>\n      </span>\n      {children}\n    </DropdownMenuPrimitive.RadioItem>\n  )\n}\n\nfunction DropdownMenuLabel({\n  className,\n  inset,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Label> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.Label\n      data-slot=\"dropdown-menu-label\"\n      data-inset={inset}\n      className={cn(\n        'px-2 py-1.5 text-sm font-medium data-[inset]:pl-8',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Separator>) {\n  return (\n    <DropdownMenuPrimitive.Separator\n      data-slot=\"dropdown-menu-separator\"\n      className={cn('bg-border -mx-1 my-1 h-px', className)}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuShortcut({\n  className,\n  ...props\n}: React.ComponentProps<'span'>) {\n  return (\n    <span\n      data-slot=\"dropdown-menu-shortcut\"\n      className={cn(\n        'text-muted-foreground ml-auto text-xs tracking-widest',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction DropdownMenuSub({\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.Sub>) {\n  return <DropdownMenuPrimitive.Sub data-slot=\"dropdown-menu-sub\" {...props} />\n}\n\nfunction DropdownMenuSubTrigger({\n  className,\n  inset,\n  children,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubTrigger> & {\n  inset?: boolean\n}) {\n  return (\n    <DropdownMenuPrimitive.SubTrigger\n      data-slot=\"dropdown-menu-sub-trigger\"\n      data-inset={inset}\n      className={cn(\n        \"focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4\",\n        className,\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronRightIcon className=\"ml-auto size-4\" />\n    </DropdownMenuPrimitive.SubTrigger>\n  )\n}\n\nfunction DropdownMenuSubContent({\n  className,\n  ...props\n}: React.ComponentProps<typeof DropdownMenuPrimitive.SubContent>) {\n  return (\n    <DropdownMenuPrimitive.SubContent\n      data-slot=\"dropdown-menu-sub-content\"\n      className={cn(\n        'bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-hidden rounded-md border p-1 shadow-lg',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  DropdownMenu,\n  DropdownMenuPortal,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuGroup,\n  DropdownMenuLabel,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuSub,\n  DropdownMenuSubTrigger,\n  DropdownMenuSubContent,\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3220, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,6LAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 3251, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/ui/label.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,6LAAC,4KAAmB;QAClB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf;KAdS"}},
    {"offset": {"line": 3284, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/ui/switch.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as SwitchPrimitive from '@radix-ui/react-switch'\n\nimport { cn } from '@/lib/utils'\n\nfunction Switch({\n  className,\n  ...props\n}: React.ComponentProps<typeof SwitchPrimitive.Root>) {\n  return (\n    <SwitchPrimitive.Root\n      data-slot=\"switch\"\n      className={cn(\n        'peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    >\n      <SwitchPrimitive.Thumb\n        data-slot=\"switch-thumb\"\n        className={\n          'bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0'\n        }\n      />\n    </SwitchPrimitive.Root>\n  )\n}\n\nexport { Switch }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,6LAAC,6KAAoB;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,6WACA;QAED,GAAG,KAAK;kBAET,cAAA,6LAAC,8KAAqB;YACpB,aAAU;YACV,WACE;;;;;;;;;;;AAKV;KArBS"}},
    {"offset": {"line": 3325, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/settings-modal.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { X, RotateCcw, Keyboard, Grid, Moon, Sun, Undo, ChevronRight, ArrowLeft, Globe } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Switch } from \"@/components/ui/switch\"\nimport { Input } from \"@/components/ui/input\"\nimport { useHaloboardStore } from \"@/lib/store\"\nimport type { Keybindings, Language } from \"@/lib/types\"\nimport { cn } from \"@/lib/utils\"\nimport { useTheme } from \"next-themes\"\nimport { useTranslation } from \"@/lib/i18n\"\n\ninterface SettingsModalProps {\n  isOpen: boolean\n  onClose: () => void\n}\n\ntype View = \"main\" | \"keybindings\" | \"language\"\n\nconst FlagIcon = ({ lang }: { lang: Language }) => {\n  switch (lang) {\n    case \"tr\": // Turkey: Red with white crescent and star\n      return (\n        <svg viewBox=\"0 0 32 32\" className=\"size-6 rounded-full border border-black/10 overflow-hidden\">\n          <rect width=\"32\" height=\"32\" fill=\"#E30A17\" />\n          <circle cx=\"14\" cy=\"16\" r=\"8\" fill=\"white\" />\n          <circle cx=\"16\" cy=\"16\" r=\"6.4\" fill=\"#E30A17\" />\n          <path d=\"M21.827,16.897l-0.363-1.117l-0.977-0.663l1.152-0.223l0.558-1.032l0.31,1.133l1.112,0.378l-0.918,0.743l0.182,1.16L21.827,16.897z\" fill=\"white\" transform=\"translate(-1 0.5) scale(1.2)\" />\n        </svg>\n      )\n    case \"ru\": // Russia: White/Blue/Red bands\n      return (\n        <svg viewBox=\"0 0 32 32\" className=\"size-6 rounded-full border border-black/10 overflow-hidden\">\n          <rect width=\"32\" height=\"10.6\" fill=\"white\" />\n          <rect y=\"10.6\" width=\"32\" height=\"10.6\" fill=\"#0039A6\" />\n          <rect y=\"21.2\" width=\"32\" height=\"10.8\" fill=\"#D52B1E\" />\n        </svg>\n      )\n    case \"es\": // Spain: Red/Yellow/Red\n      return (\n        <svg viewBox=\"0 0 32 32\" className=\"size-6 rounded-full border border-black/10 overflow-hidden\">\n          <rect width=\"32\" height=\"8\" fill=\"#AA151B\" />\n          <rect y=\"8\" width=\"32\" height=\"16\" fill=\"#F1BF00\" />\n          <rect y=\"24\" width=\"32\" height=\"8\" fill=\"#AA151B\" />\n        </svg>\n      )\n    case \"en\": // English (UK/US style colors - generic)\n      return (\n        <svg viewBox=\"0 0 32 32\" className=\"size-6 rounded-full border border-black/10 overflow-hidden\">\n          <rect width=\"32\" height=\"32\" fill=\"#00247D\" />\n          <path d=\"M0,0 L32,32 M32,0 L0,32\" stroke=\"white\" strokeWidth=\"4\" />\n          <path d=\"M16,0 L16,32 M0,16 L32,16\" stroke=\"white\" strokeWidth=\"6\" />\n          <path d=\"M16,0 L16,32 M0,16 L32,16\" stroke=\"#CF142B\" strokeWidth=\"3\" />\n        </svg>\n      )\n  }\n}\n\nexport function SettingsModal({ isOpen, onClose }: SettingsModalProps) {\n  const { \n    keybindings, setKeybinding, resetKeybindings, \n    showGrid, setShowGrid, \n    maxUndoSteps, setMaxUndoSteps, \n    highlightColor, setHighlightColor,\n    language, setLanguage\n  } = useHaloboardStore()\n  \n  const { theme, setTheme } = useTheme()\n  const { t } = useTranslation()\n  const [mounted, setMounted] = useState(false)\n  const [view, setView] = useState<View>(\"main\")\n  const [listeningAction, setListeningAction] = useState<keyof Keybindings | null>(null)\n\n  useEffect(() => setMounted(true), [])\n\n  // Keybinding Listener\n  useEffect(() => {\n    if (!listeningAction) return\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      e.preventDefault()\n      const key = e.key.toLowerCase()\n      if (key === \"escape\") {\n        setListeningAction(null)\n        return\n      }\n      setKeybinding(listeningAction, key)\n      setListeningAction(null)\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [listeningAction, setKeybinding])\n\n  if (!isOpen) return null\n\n  const colors = [ \n    { name: \"Blue\", value: \"#0A84FF\" }, \n    { name: \"Red\", value: \"#EF4444\" }, \n    { name: \"Green\", value: \"#22C55E\" }, \n    { name: \"Yellow\", value: \"#EAB308\" }, \n    { name: \"Purple\", value: \"#8B5CF6\" } \n  ]\n\n  const actionLabels: Record<keyof Keybindings, string> = {\n    select: t(\"select\", \"tools\") + \" Tool\",\n    brush: t(\"brush\", \"tools\") + \" Tool\",\n    eraser: t(\"eraser\", \"tools\") + \" Tool\",\n    shape: t(\"shape\", \"tools\") + \" Tool\",\n    text: t(\"text\", \"tools\") + \" Tool\",\n    note: t(\"note\", \"tools\") + \" Tool\",\n    image: t(\"image\", \"tools\") + \" Tool\",\n  }\n\n  const languages: { code: Language; name: string }[] = [\n    { code: \"en\", name: \"English\" },\n    { code: \"tr\", name: \"Türkçe\" },\n    { code: \"ru\", name: \"Русский\" },\n    { code: \"es\", name: \"Español\" },\n  ]\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n      <div className=\"relative w-full max-w-md rounded-xl border border-white/20 bg-white/95 p-6 shadow-2xl backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/95 overflow-hidden flex flex-col max-h-[85vh]\">\n        \n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-6 shrink-0\">\n          <div className=\"flex items-center gap-3\">\n            {view !== \"main\" ? (\n              <button onClick={() => setView(\"main\")} className=\"rounded-full p-1 hover:bg-black/5 dark:hover:bg-white/5\">\n                <ArrowLeft className=\"size-5 text-neutral-600 dark:text-neutral-400\" />\n              </button>\n            ) : (\n              <div className=\"size-5\" /> // Spacer\n            )}\n            <h2 className=\"text-xl font-bold text-neutral-800 dark:text-neutral-200\">\n              {view === \"main\" ? t(\"settings\") : view === \"keybindings\" ? t(\"keybindings\") : t(\"language\")}\n            </h2>\n          </div>\n          <button\n            onClick={onClose}\n            className=\"rounded-lg p-1 hover:bg-black/5 dark:hover:bg-white/5\"\n          >\n            <X className=\"size-5 text-neutral-600 dark:text-neutral-400\" />\n          </button>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto pr-1\">\n          {/* MAIN SETTINGS VIEW */}\n          {view === \"main\" && (\n            <div className=\"space-y-6\">\n              {/* General Settings */}\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <Grid className=\"size-5 text-neutral-500\" />\n                    <span className=\"text-sm font-medium text-neutral-700 dark:text-neutral-300\">{t(\"showGrid\")}</span>\n                  </div>\n                  <Switch checked={showGrid} onCheckedChange={setShowGrid} />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    {mounted && theme === 'dark' ? <Moon className=\"size-5 text-neutral-500\" /> : <Sun className=\"size-5 text-neutral-500\" />}\n                    <span className=\"text-sm font-medium text-neutral-700 dark:text-neutral-300\">{t(\"darkMode\")}</span>\n                  </div>\n                  <Switch checked={mounted && theme === 'dark'} onCheckedChange={(c) => setTheme(c ? 'dark' : 'light')} />\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    <Undo className=\"size-5 text-neutral-500\" />\n                    <span className=\"text-sm font-medium text-neutral-700 dark:text-neutral-300\">{t(\"maxUndoSteps\")}</span>\n                  </div>\n                  <Input \n                    type=\"number\" \n                    min={1} \n                    max={200} \n                    value={maxUndoSteps} \n                    onChange={(e) => setMaxUndoSteps(Number(e.target.value))} \n                    className=\"h-8 w-20 text-center\" \n                  />\n                </div>\n              </div>\n\n              <div className=\"h-px bg-neutral-200 dark:bg-neutral-800\" />\n\n              {/* Highlight Color */}\n              <div>\n                <label className=\"mb-3 block text-sm font-medium text-neutral-700 dark:text-neutral-300\">{t(\"highlightColor\")}</label>\n                <div className=\"flex gap-3\">\n                  {colors.map((c) => (\n                    <button \n                      key={c.value} \n                      onClick={() => setHighlightColor(c.value)} \n                      className={cn(\n                        \"size-8 rounded-full border-2 transition-all\", \n                        highlightColor === c.value ? \"border-neutral-900 dark:border-white scale-110\" : \"border-transparent\"\n                      )} \n                      style={{ backgroundColor: c.value }} \n                      title={c.name} \n                    />\n                  ))}\n                </div>\n              </div>\n\n              <div className=\"h-px bg-neutral-200 dark:bg-neutral-800\" />\n\n              {/* Sub-Menus */}\n              <div className=\"space-y-2\">\n                <button \n                  onClick={() => setView(\"language\")}\n                  className=\"flex w-full items-center justify-between rounded-lg p-3 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors\"\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <Globe className=\"size-5 text-neutral-500\" />\n                    <span className=\"text-sm font-medium text-neutral-700 dark:text-neutral-300\">{t(\"language\")}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <FlagIcon lang={language} />\n                    <span className=\"text-xs text-neutral-500 uppercase\">{language}</span>\n                    <ChevronRight className=\"size-4 text-neutral-400\" />\n                  </div>\n                </button>\n\n                <button \n                  onClick={() => setView(\"keybindings\")}\n                  className=\"flex w-full items-center justify-between rounded-lg p-3 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors\"\n                >\n                  <div className=\"flex items-center gap-3\">\n                    <Keyboard className=\"size-5 text-neutral-500\" />\n                    <span className=\"text-sm font-medium text-neutral-700 dark:text-neutral-300\">{t(\"keybindings\")}</span>\n                  </div>\n                  <ChevronRight className=\"size-4 text-neutral-400\" />\n                </button>\n              </div>\n            </div>\n          )}\n\n          {/* KEYBINDINGS VIEW */}\n          {view === \"keybindings\" && (\n            <div className=\"space-y-4\">\n              <div className=\"space-y-3\">\n                {Object.entries(keybindings).map(([action, key]) => (\n                  <div\n                    key={action}\n                    className=\"flex items-center justify-between rounded-lg border border-neutral-200 bg-neutral-50/50 p-3 dark:border-neutral-800 dark:bg-neutral-800/50\"\n                  >\n                    <span className=\"text-sm font-medium text-neutral-700 dark:text-neutral-300\">\n                      {actionLabels[action as keyof Keybindings]}\n                    </span>\n                    <button\n                      onClick={() => setListeningAction(action as keyof Keybindings)}\n                      className={cn(\n                        \"min-w-[3rem] rounded-md border px-2 py-1 text-xs font-mono font-bold uppercase transition-all\",\n                        listeningAction === action\n                          ? \"border-[#0A84FF] bg-[#0A84FF] text-white animate-pulse\"\n                          : \"border-neutral-300 bg-white text-neutral-600 hover:border-[#0A84FF] dark:border-neutral-600 dark:bg-neutral-700 dark:text-neutral-200\"\n                      )}\n                    >\n                      {listeningAction === action ? \"...\" : key}\n                    </button>\n                  </div>\n                ))}\n              </div>\n              \n              <Button\n                variant=\"outline\"\n                onClick={resetKeybindings}\n                className=\"w-full gap-2 text-xs mt-4\"\n              >\n                <RotateCcw className=\"size-3\" /> {t(\"resetDefaults\")}\n              </Button>\n            </div>\n          )}\n\n          {/* LANGUAGE VIEW */}\n          {view === \"language\" && (\n            <div className=\"space-y-3\">\n              {languages.map((lang) => (\n                <button\n                  key={lang.code}\n                  onClick={() => setLanguage(lang.code)}\n                  className={cn(\n                    \"flex w-full items-center justify-between rounded-lg border p-4 transition-all\",\n                    language === lang.code \n                      ? \"border-[#0A84FF] bg-[#0A84FF]/5 dark:bg-[#0A84FF]/10\" \n                      : \"border-neutral-200 bg-white hover:border-neutral-300 dark:border-neutral-800 dark:bg-neutral-900 dark:hover:border-neutral-700\"\n                  )}\n                >\n                  <div className=\"flex items-center gap-4\">\n                    <FlagIcon lang={lang.code} />\n                    <span className={cn(\n                      \"text-sm font-medium\",\n                      language === lang.code ? \"text-[#0A84FF]\" : \"text-neutral-700 dark:text-neutral-300\"\n                    )}>\n                      {lang.name}\n                    </span>\n                  </div>\n                  {language === lang.code && (\n                    <div className=\"size-2 rounded-full bg-[#0A84FF]\" />\n                  )}\n                </button>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4158, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/hooks/use-toast.ts"],"sourcesContent":["'use client'\n\n// Inspired by react-hot-toast library\nimport * as React from 'react'\n\nimport type { ToastActionElement, ToastProps } from '@/components/ui/toast'\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: 'ADD_TOAST',\n  UPDATE_TOAST: 'UPDATE_TOAST',\n  DISMISS_TOAST: 'DISMISS_TOAST',\n  REMOVE_TOAST: 'REMOVE_TOAST',\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType['ADD_TOAST']\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType['UPDATE_TOAST']\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType['DISMISS_TOAST']\n      toastId?: ToasterToast['id']\n    }\n  | {\n      type: ActionType['REMOVE_TOAST']\n      toastId?: ToasterToast['id']\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: 'REMOVE_TOAST',\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case 'ADD_TOAST':\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case 'UPDATE_TOAST':\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t,\n        ),\n      }\n\n    case 'DISMISS_TOAST': {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t,\n        ),\n      }\n    }\n    case 'REMOVE_TOAST':\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, 'id'>\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: 'UPDATE_TOAST',\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: 'DISMISS_TOAST', toastId: id })\n\n  dispatch({\n    type: 'ADD_TOAST',\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: 'DISMISS_TOAST', toastId }),\n  }\n}\n\nexport { useToast, toast }\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4325, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/header.tsx"],"sourcesContent":["\"use client\"\n\nimport { Share2, MoreVertical, Plus, FolderOpen, FilePlus, Check, X } from \"lucide-react\"\nimport { Button } from \"@/components/ui/button\"\nimport { useState, useEffect, useRef } from \"react\"\nimport { InviteModal } from \"@/components/invite-modal\"\nimport { useHaloboardStore } from \"@/lib/store\"\nimport { ExportMenu } from \"@/components/export-menu\"\nimport { AutoSaveIndicator } from \"@/components/auto-save-indicator\"\nimport { useStorage } from \"@/lib/storage\"\nimport { useTheme } from \"next-themes\"\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from \"@/components/ui/dropdown-menu\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { cn } from \"@/lib/utils\"\nimport { SettingsModal } from \"@/components/settings-modal\"\nimport { useToast } from \"@/hooks/use-toast\"\nimport { useTranslation } from \"@/lib/i18n\"\n\nexport function Header() {\n  const [showInviteModal, setShowInviteModal] = useState(false)\n  const [showNewProjectModal, setShowNewProjectModal] = useState(false)\n  const [showSettingsModal, setShowSettingsModal] = useState(false)\n  const [projectName, setProjectName] = useState(\"Untitled Project\")\n  const [projectMode, setProjectMode] = useState<\"infinite\" | \"fixed\">(\"infinite\")\n  const [projectWidth, setProjectWidth] = useState(1920)\n  const [projectHeight, setProjectHeight] = useState(1080)\n  const [projectBg, setProjectBg] = useState(\"#ffffff\")\n  \n  // Project Name Editing State\n  const [isEditingName, setIsEditingName] = useState(false)\n  const [tempName, setTempName] = useState(\"\")\n  const nameInputRef = useRef<HTMLInputElement>(null)\n\n  const users = useHaloboardStore((state) => state.users)\n  const { resetProject, loadProject, canvasSettings, setCanvasSettings, addObject, addLayer, updateLayer } = useHaloboardStore()\n  const { theme, setTheme } = useTheme()\n  const storage = useStorage()\n  const { toast } = useToast()\n  const { t } = useTranslation()\n  \n  const fileInputRef = useRef<HTMLInputElement>(null)\n  const imgInputRef = useRef<HTMLInputElement>(null)\n\n  const [mounted, setMounted] = useState(false)\n  useEffect(() => setMounted(true), [])\n  useEffect(() => { return () => { if (storage) storage.stopAutoSave() } }, [storage])\n\n  // Ctrl + S Shortcut\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 's') {\n        e.preventDefault()\n        toast({\n          description: t(\"autoSaveMessage\"),\n          duration: 3000,\n        })\n      }\n    }\n    window.addEventListener('keydown', handleKeyDown)\n    return () => window.removeEventListener('keydown', handleKeyDown)\n  }, [t, toast])\n\n  // Focus input when editing starts\n  useEffect(() => {\n    if (isEditingName && nameInputRef.current) {\n      nameInputRef.current.focus()\n      nameInputRef.current.select()\n    }\n  }, [isEditingName])\n\n  const handleImportTPAD = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]; if (!file) return;\n    const reader = new FileReader(); reader.onload = (event) => { try { const content = event.target?.result as string; const data = JSON.parse(content); if (data.objects && data.layers) loadProject(data); else alert(\"Invalid .tpad file\") } catch (err) { console.error(\"Failed to parse tpad file\", err); alert(\"Failed to load file\") } }; reader.readAsText(file); e.target.value = ''\n  }\n\n  const handleImportBackground = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0]; if (!file) return;\n    const reader = new FileReader(); reader.onload = (event) => {\n      const src = event.target?.result as string; const img = new Image(); img.onload = () => {\n        const store = useHaloboardStore.getState()\n        store.addLayer(t(\"newLayer\") + \" \" + (store.layers.length + 1)) // Just add a placeholder first\n        const { activeLayerId, layers, reorderLayer, updateLayer, addObject } = useHaloboardStore.getState()\n        updateLayer(activeLayerId, { name: t(\"background\") }) // Rename to localized \"Background\"\n        reorderLayer(0, layers.length)\n        addObject({ \n          id: `bg-${Date.now()}`, \n          name: t(\"background\"), \n          type: \"image\", \n          layerId: activeLayerId, \n          transform: { x: 0, y: 0, rotation: 0, scaleX: 1, scaleY: 1, anchor: \"center\" }, \n          data: { src, width: img.width, height: img.height, opacity: 1, blendMode: 'normal' } \n        })\n      }; img.src = src;\n    }; reader.readAsDataURL(file); e.target.value = '';\n  }\n\n  const handleCreateProject = () => { resetProject({ projectName: projectName.trim() || t(\"untitledProject\"), infinite: projectMode === \"infinite\", width: projectWidth, height: projectHeight, backgroundColor: projectBg }); setShowNewProjectModal(false) }\n\n  const startRenaming = () => {\n    setTempName(canvasSettings.projectName)\n    setIsEditingName(true)\n  }\n\n  const finishRenaming = () => {\n    if (tempName.trim()) {\n      setCanvasSettings({ projectName: tempName.trim() })\n    }\n    setIsEditingName(false)\n  }\n\n  return (\n    <>\n      <header className=\"absolute left-0 right-0 top-0 z-40 flex h-14 items-center justify-between border-b border-neutral-200/80 bg-neutral-100/50 px-4 backdrop-blur-sm dark:border-neutral-800/80 dark:bg-neutral-900/50\">\n        <div className=\"flex items-center gap-4\">\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild><Button variant=\"ghost\" size=\"icon\" className=\"size-8 hover:bg-neutral-200 dark:hover:bg-neutral-800\"><Plus className=\"size-5 text-neutral-700 dark:text-neutral-300\" /></Button></DropdownMenuTrigger>\n            <DropdownMenuContent align=\"start\">\n              <DropdownMenuItem onClick={() => setShowNewProjectModal(true)}><FilePlus className=\"mr-2 size-4\" /><span>{t(\"newProject\")}</span></DropdownMenuItem>\n              <DropdownMenuItem onClick={() => fileInputRef.current?.click()}><FolderOpen className=\"mr-2 size-4\" /><span>{t(\"openTpad\")}</span></DropdownMenuItem>\n              <DropdownMenuItem onClick={() => imgInputRef.current?.click()}><FolderOpen className=\"mr-2 size-4\" /><span>{t(\"importImage\")}</span></DropdownMenuItem>\n            </DropdownMenuContent>\n          </DropdownMenu>\n          <input type=\"file\" accept=\".tpad,.json\" ref={fileInputRef} className=\"hidden\" onChange={handleImportTPAD} />\n          <input type=\"file\" accept=\"image/*\" ref={imgInputRef} className=\"hidden\" onChange={handleImportBackground} />\n          <div className=\"flex gap-2\"><div className=\"size-3 rounded-full bg-red-500\" /><div className=\"size-3 rounded-full bg-yellow-500\" /><div className=\"size-3 rounded-full bg-green-500\" /></div>\n        </div>\n        \n        <div className=\"absolute left-1/2 flex -translate-x-1/2 items-center gap-3\">\n          <span className=\"text-sm font-medium text-neutral-600 dark:text-neutral-400\">Haloboard - </span>\n          {isEditingName ? (\n            <input\n              ref={nameInputRef}\n              type=\"text\"\n              value={tempName}\n              onChange={(e) => setTempName(e.target.value)}\n              onBlur={finishRenaming}\n              onKeyDown={(e) => e.key === \"Enter\" && finishRenaming()}\n              className=\"h-6 w-40 rounded-sm border border-[#0A84FF] bg-white px-1 text-sm font-medium text-neutral-900 outline-none dark:bg-neutral-800 dark:text-neutral-100\"\n            />\n          ) : (\n            <h1 \n              onClick={startRenaming}\n              className=\"cursor-text rounded-sm px-1 text-sm font-medium text-neutral-900 hover:bg-black/5 dark:text-neutral-100 dark:hover:bg-white/10\"\n            >\n              {canvasSettings.projectName}\n            </h1>\n          )}\n          <AutoSaveIndicator />\n        </div>\n\n        <div className=\"flex flex-1 items-center justify-end gap-3\">\n          <div className=\"flex items-center -space-x-2\">{users.slice(0, 3).map((user) => (<div key={user.id} className=\"size-8 rounded-full border-2 border-white dark:border-neutral-800\" style={{ backgroundColor: user.color }} title={user.name} />))}{users.length > 3 && (<div className=\"flex size-8 items-center justify-center rounded-full border-2 border-white bg-neutral-200 text-xs font-semibold text-neutral-600 dark:border-neutral-800 dark:bg-neutral-700 dark:text-neutral-300\">+{users.length - 3}</div>)}</div>\n          <ExportMenu />\n          <Button onClick={() => setShowInviteModal(true)} className=\"h-8 gap-2 bg-[#0A84FF] text-sm font-semibold hover:bg-[#0A84FF]/90\"><Share2 className=\"size-4\" /> {t(\"share\")}</Button>\n          \n          {/* Replaced Dropdown with Settings Modal Trigger */}\n          <Button \n            onClick={() => setShowSettingsModal(true)} \n            variant=\"ghost\" \n            size=\"icon\" \n            className=\"h-8 w-8\"\n          >\n            <MoreVertical className=\"size-4\" />\n          </Button>\n        </div>\n      </header>\n      \n      <InviteModal isOpen={showInviteModal} onClose={() => setShowInviteModal(false)} />\n      <SettingsModal isOpen={showSettingsModal} onClose={() => setShowSettingsModal(false)} />\n      \n      {showNewProjectModal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n          <div className=\"relative w-full max-w-md rounded-xl border border-white/20 bg-white/95 p-6 shadow-2xl backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/95 transition-all\">\n            <button onClick={() => setShowNewProjectModal(false)} className=\"absolute right-4 top-4 rounded-lg p-1 hover:bg-black/5 dark:hover:bg-white/5\"><X className=\"size-5 text-neutral-600 dark:text-neutral-400\" /></button>\n            <h2 className=\"text-xl font-bold text-neutral-800 dark:text-neutral-200 mb-6\">{t(\"newProject\")}</h2>\n            <div className=\"space-y-6\">\n              <div className=\"space-y-2\"><Label>Project Name</Label><Input value={projectName} onChange={(e) => setProjectName(e.target.value)} placeholder={t(\"untitledProject\")} /></div>\n              <div className=\"space-y-3\"><Label className=\"text-xs font-medium text-neutral-500 uppercase\">Canvas Mode</Label><div className=\"grid grid-cols-2 gap-2\"><button onClick={() => setProjectMode(\"infinite\")} className={cn(\"flex flex-col items-center justify-center gap-2 rounded-lg border-2 p-4 transition-all\", projectMode === \"infinite\" ? \"border-[#0A84FF] bg-[#0A84FF]/5 text-[#0A84FF]\" : \"border-neutral-200 bg-transparent text-neutral-600 hover:border-neutral-300 dark:border-neutral-800 dark:text-neutral-400\")}><span className=\"font-semibold\">Infinite Canvas</span></button><button onClick={() => setProjectMode(\"fixed\")} className={cn(\"flex flex-col items-center justify-center gap-2 rounded-lg border-2 p-4 transition-all\", projectMode === \"fixed\" ? \"border-[#0A84FF] bg-[#0A84FF]/5 text-[#0A84FF]\" : \"border-neutral-200 bg-transparent text-neutral-600 hover:border-neutral-300 dark:border-neutral-800 dark:text-neutral-400\")}><span className=\"font-semibold\">Specific Resolution</span></button></div></div>\n              {projectMode === \"fixed\" && (<div className=\"space-y-4 animate-in fade-in zoom-in-95 duration-200\"><div className=\"grid grid-cols-2 gap-4\"><div className=\"space-y-1.5\"><Label>Width (px)</Label><Input type=\"number\" value={projectWidth} onChange={(e) => setProjectWidth(Number(e.target.value))} /></div><div className=\"space-y-1.5\"><Label>Height (px)</Label><Input type=\"number\" value={projectHeight} onChange={(e) => setProjectHeight(Number(e.target.value))} /></div></div><div className=\"space-y-2\"><Label>Background Color</Label><div className=\"flex items-center gap-3\"><button onClick={() => setProjectBg(\"#ffffff\")} className={cn(\"size-8 rounded-full border shadow-sm bg-white\", projectBg === \"#ffffff\" && \"ring-2 ring-[#0A84FF] ring-offset-2\")} /><button onClick={() => setProjectBg(\"#000000\")} className={cn(\"size-8 rounded-full border shadow-sm bg-black\", projectBg === \"#000000\" && \"ring-2 ring-[#0A84FF] ring-offset-2\")} /><div className=\"relative flex items-center\"><input type=\"color\" value={projectBg} onChange={(e) => setProjectBg(e.target.value)} className=\"size-8 p-0 border-0 rounded-full overflow-hidden cursor-pointer\" /></div><span className=\"text-sm font-mono text-neutral-500 uppercase\">{projectBg}</span></div></div></div>)}\n              <Button onClick={handleCreateProject} className=\"w-full bg-[#0A84FF] hover:bg-[#0A84FF]/90 gap-2\"><Plus className=\"size-4\" /> {t(\"newProject\")}</Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAjBA;;;;;;;;;;;;;;;;;AAmBO,SAAS;;IACd,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC;IAC/D,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,IAAA,yKAAQ,EAAC;IAC3D,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAC;IAC/C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAuB;IACrE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAE3C,6BAA6B;IAC7B,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,eAAe,IAAA,uKAAM,EAAmB;IAE9C,MAAM,QAAQ,IAAA,oIAAiB;2CAAC,CAAC,QAAU,MAAM,KAAK;;IACtD,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,cAAc,EAAE,iBAAiB,EAAE,SAAS,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,IAAA,oIAAiB;IAC5H,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,+JAAQ;IACpC,MAAM,UAAU,IAAA,gIAAU;IAC1B,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,oIAAQ;IAC1B,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,gIAAc;IAE5B,MAAM,eAAe,IAAA,uKAAM,EAAmB;IAC9C,MAAM,cAAc,IAAA,uKAAM,EAAmB;IAE7C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,IAAA,0KAAS;4BAAC,IAAM,WAAW;2BAAO,EAAE;IACpC,IAAA,0KAAS;4BAAC;YAAQ;oCAAO;oBAAQ,IAAI,SAAS,QAAQ,YAAY;gBAAG;;QAAE;2BAAG;QAAC;KAAQ;IAEnF,oBAAoB;IACpB,IAAA,0KAAS;4BAAC;YACR,MAAM;kDAAgB,CAAC;oBACrB,IAAI,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,KAAK,EAAE,GAAG,CAAC,WAAW,OAAO,KAAK;wBAC3D,EAAE,cAAc;wBAChB,MAAM;4BACJ,aAAa,EAAE;4BACf,UAAU;wBACZ;oBACF;gBACF;;YACA,OAAO,gBAAgB,CAAC,WAAW;YACnC;oCAAO,IAAM,OAAO,mBAAmB,CAAC,WAAW;;QACrD;2BAAG;QAAC;QAAG;KAAM;IAEb,kCAAkC;IAClC,IAAA,0KAAS;4BAAC;YACR,IAAI,iBAAiB,aAAa,OAAO,EAAE;gBACzC,aAAa,OAAO,CAAC,KAAK;gBAC1B,aAAa,OAAO,CAAC,MAAM;YAC7B;QACF;2BAAG;QAAC;KAAc;IAElB,MAAM,mBAAmB,CAAC;QACxB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAAE,IAAI,CAAC,MAAM;QAC7C,MAAM,SAAS,IAAI;QAAc,OAAO,MAAM,GAAG,CAAC;YAAY,IAAI;gBAAE,MAAM,UAAU,MAAM,MAAM,EAAE;gBAAkB,MAAM,OAAO,KAAK,KAAK,CAAC;gBAAU,IAAI,KAAK,OAAO,IAAI,KAAK,MAAM,EAAE,YAAY;qBAAY,MAAM;YAAsB,EAAE,OAAO,KAAK;gBAAE,QAAQ,KAAK,CAAC,6BAA6B;gBAAM,MAAM;YAAuB;QAAE;QAAG,OAAO,UAAU,CAAC;QAAO,EAAE,MAAM,CAAC,KAAK,GAAG;IAC1X;IAEA,MAAM,yBAAyB,CAAC;QAC9B,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAAE,IAAI,CAAC,MAAM;QAC7C,MAAM,SAAS,IAAI;QAAc,OAAO,MAAM,GAAG,CAAC;YAChD,MAAM,MAAM,MAAM,MAAM,EAAE;YAAkB,MAAM,MAAM,IAAI;YAAS,IAAI,MAAM,GAAG;gBAChF,MAAM,QAAQ,oIAAiB,CAAC,QAAQ;gBACxC,MAAM,QAAQ,CAAC,EAAE,cAAc,MAAM,CAAC,MAAM,MAAM,CAAC,MAAM,GAAG,CAAC,IAAG,+BAA+B;gBAC/F,MAAM,EAAE,aAAa,EAAE,MAAM,EAAE,YAAY,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,oIAAiB,CAAC,QAAQ;gBAClG,YAAY,eAAe;oBAAE,MAAM,EAAE;gBAAc,IAAG,mCAAmC;gBACzF,aAAa,GAAG,OAAO,MAAM;gBAC7B,UAAU;oBACR,IAAI,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI;oBACtB,MAAM,EAAE;oBACR,MAAM;oBACN,SAAS;oBACT,WAAW;wBAAE,GAAG;wBAAG,GAAG;wBAAG,UAAU;wBAAG,QAAQ;wBAAG,QAAQ;wBAAG,QAAQ;oBAAS;oBAC7E,MAAM;wBAAE;wBAAK,OAAO,IAAI,KAAK;wBAAE,QAAQ,IAAI,MAAM;wBAAE,SAAS;wBAAG,WAAW;oBAAS;gBACrF;YACF;YAAG,IAAI,GAAG,GAAG;QACf;QAAG,OAAO,aAAa,CAAC;QAAO,EAAE,MAAM,CAAC,KAAK,GAAG;IAClD;IAEA,MAAM,sBAAsB;QAAQ,aAAa;YAAE,aAAa,YAAY,IAAI,MAAM,EAAE;YAAoB,UAAU,gBAAgB;YAAY,OAAO;YAAc,QAAQ;YAAe,iBAAiB;QAAU;QAAI,uBAAuB;IAAO;IAE3P,MAAM,gBAAgB;QACpB,YAAY,eAAe,WAAW;QACtC,iBAAiB;IACnB;IAEA,MAAM,iBAAiB;QACrB,IAAI,SAAS,IAAI,IAAI;YACnB,kBAAkB;gBAAE,aAAa,SAAS,IAAI;YAAG;QACnD;QACA,iBAAiB;IACnB;IAEA,qBACE;;0BACE,6LAAC;gBAAO,WAAU;;kCAChB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC,wJAAY;;kDACX,6LAAC,+JAAmB;wCAAC,OAAO;kDAAC,cAAA,6LAAC,wIAAM;4CAAC,SAAQ;4CAAQ,MAAK;4CAAO,WAAU;sDAAwD,cAAA,6LAAC,6MAAI;gDAAC,WAAU;;;;;;;;;;;;;;;;kDACnJ,6LAAC,+JAAmB;wCAAC,OAAM;;0DACzB,6LAAC,4JAAgB;gDAAC,SAAS,IAAM,uBAAuB;;kEAAO,6LAAC,6NAAQ;wDAAC,WAAU;;;;;;kEAAgB,6LAAC;kEAAM,EAAE;;;;;;;;;;;;0DAC5G,6LAAC,4JAAgB;gDAAC,SAAS,IAAM,aAAa,OAAO,EAAE;;kEAAS,6LAAC,mOAAU;wDAAC,WAAU;;;;;;kEAAgB,6LAAC;kEAAM,EAAE;;;;;;;;;;;;0DAC/G,6LAAC,4JAAgB;gDAAC,SAAS,IAAM,YAAY,OAAO,EAAE;;kEAAS,6LAAC,mOAAU;wDAAC,WAAU;;;;;;kEAAgB,6LAAC;kEAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;;;0CAGlH,6LAAC;gCAAM,MAAK;gCAAO,QAAO;gCAAc,KAAK;gCAAc,WAAU;gCAAS,UAAU;;;;;;0CACxF,6LAAC;gCAAM,MAAK;gCAAO,QAAO;gCAAU,KAAK;gCAAa,WAAU;gCAAS,UAAU;;;;;;0CACnF,6LAAC;gCAAI,WAAU;;kDAAa,6LAAC;wCAAI,WAAU;;;;;;kDAAmC,6LAAC;wCAAI,WAAU;;;;;;kDAAsC,6LAAC;wCAAI,WAAU;;;;;;;;;;;;;;;;;;kCAGpJ,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAK,WAAU;0CAA6D;;;;;;4BAC5E,8BACC,6LAAC;gCACC,KAAK;gCACL,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;gCAC3C,QAAQ;gCACR,WAAW,CAAC,IAAM,EAAE,GAAG,KAAK,WAAW;gCACvC,WAAU;;;;;qDAGZ,6LAAC;gCACC,SAAS;gCACT,WAAU;0CAET,eAAe,WAAW;;;;;;0CAG/B,6LAAC,gKAAiB;;;;;;;;;;;kCAGpB,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;;oCAAgC,MAAM,KAAK,CAAC,GAAG,GAAG,GAAG,CAAC,CAAC,qBAAU,6LAAC;4CAAkB,WAAU;4CAAoE,OAAO;gDAAE,iBAAiB,KAAK,KAAK;4CAAC;4CAAG,OAAO,KAAK,IAAI;2CAA/I,KAAK,EAAE;;;;;oCAAgJ,MAAM,MAAM,GAAG,mBAAM,6LAAC;wCAAI,WAAU;;4CAAqM;4CAAE,MAAM,MAAM,GAAG;;;;;;;;;;;;;0CAC3e,6LAAC,8IAAU;;;;;0CACX,6LAAC,wIAAM;gCAAC,SAAS,IAAM,mBAAmB;gCAAO,WAAU;;kDAAqE,6LAAC,uNAAM;wCAAC,WAAU;;;;;;oCAAW;oCAAE,EAAE;;;;;;;0CAGjK,6LAAC,wIAAM;gCACL,SAAS,IAAM,qBAAqB;gCACpC,SAAQ;gCACR,MAAK;gCACL,WAAU;0CAEV,cAAA,6LAAC,6OAAY;oCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;0BAK9B,6LAAC,gJAAW;gBAAC,QAAQ;gBAAiB,SAAS,IAAM,mBAAmB;;;;;;0BACxE,6LAAC,oJAAa;gBAAC,QAAQ;gBAAmB,SAAS,IAAM,qBAAqB;;;;;;YAE7E,qCACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAO,SAAS,IAAM,uBAAuB;4BAAQ,WAAU;sCAA+E,cAAA,6LAAC,oMAAC;gCAAC,WAAU;;;;;;;;;;;sCAC5J,6LAAC;4BAAG,WAAU;sCAAiE,EAAE;;;;;;sCACjF,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;;sDAAY,6LAAC,sIAAK;sDAAC;;;;;;sDAAoB,6LAAC,sIAAK;4CAAC,OAAO;4CAAa,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;4CAAG,aAAa,EAAE;;;;;;;;;;;;8CACjJ,6LAAC;oCAAI,WAAU;;sDAAY,6LAAC,sIAAK;4CAAC,WAAU;sDAAiD;;;;;;sDAAmB,6LAAC;4CAAI,WAAU;;8DAAyB,6LAAC;oDAAO,SAAS,IAAM,eAAe;oDAAa,WAAW,IAAA,qHAAE,EAAC,0FAA0F,gBAAgB,aAAa,mDAAmD;8DAA8H,cAAA,6LAAC;wDAAK,WAAU;kEAAgB;;;;;;;;;;;8DAA+B,6LAAC;oDAAO,SAAS,IAAM,eAAe;oDAAU,WAAW,IAAA,qHAAE,EAAC,0FAA0F,gBAAgB,UAAU,mDAAmD;8DAA8H,cAAA,6LAAC;wDAAK,WAAU;kEAAgB;;;;;;;;;;;;;;;;;;;;;;;gCACl8B,gBAAgB,yBAAY,6LAAC;oCAAI,WAAU;;sDAAuD,6LAAC;4CAAI,WAAU;;8DAAyB,6LAAC;oDAAI,WAAU;;sEAAc,6LAAC,sIAAK;sEAAC;;;;;;sEAAkB,6LAAC,sIAAK;4DAAC,MAAK;4DAAS,OAAO;4DAAc,UAAU,CAAC,IAAM,gBAAgB,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;8DAAY,6LAAC;oDAAI,WAAU;;sEAAc,6LAAC,sIAAK;sEAAC;;;;;;sEAAmB,6LAAC,sIAAK;4DAAC,MAAK;4DAAS,OAAO;4DAAe,UAAU,CAAC,IAAM,iBAAiB,OAAO,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;;;;;;;sDAAkB,6LAAC;4CAAI,WAAU;;8DAAY,6LAAC,sIAAK;8DAAC;;;;;;8DAAwB,6LAAC;oDAAI,WAAU;;sEAA0B,6LAAC;4DAAO,SAAS,IAAM,aAAa;4DAAY,WAAW,IAAA,qHAAE,EAAC,iDAAiD,cAAc,aAAa;;;;;;sEAA0C,6LAAC;4DAAO,SAAS,IAAM,aAAa;4DAAY,WAAW,IAAA,qHAAE,EAAC,iDAAiD,cAAc,aAAa;;;;;;sEAA0C,6LAAC;4DAAI,WAAU;sEAA6B,cAAA,6LAAC;gEAAM,MAAK;gEAAQ,OAAO;gEAAW,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;gEAAG,WAAU;;;;;;;;;;;sEAA0E,6LAAC;4DAAK,WAAU;sEAAgD;;;;;;;;;;;;;;;;;;;;;;;;8CACxrC,6LAAC,wIAAM;oCAAC,SAAS;oCAAqB,WAAU;;sDAAkD,6LAAC,6MAAI;4CAAC,WAAU;;;;;;wCAAW;wCAAE,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;AAO/I;GAxKgB;;QAeA,oIAAiB;QAC4E,oIAAiB;QAChG,+JAAQ;QACpB,gIAAU;QACR,oIAAQ;QACZ,gIAAc;;;KApBd"}},
    {"offset": {"line": 5153, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/zoom-controls.tsx"],"sourcesContent":["\"use client\"\n\nimport { Minus, Plus, Maximize2 } from \"lucide-react\"\nimport { useHaloboardStore } from \"@/lib/store\"\n\nexport function ZoomControls() {\n  const { zoom, setZoom, setPan } = useHaloboardStore()\n\n  const handleZoomIn = () => setZoom(zoom * 1.2)\n  const handleZoomOut = () => setZoom(zoom / 1.2)\n  const handleResetView = () => {\n    setZoom(1)\n    setPan(0, 0)\n  }\n\n  return (\n    <footer className=\"fixed bottom-4 right-4 z-30\">\n      <div className=\"flex items-center gap-2 rounded-lg border border-white/20 bg-white/60 p-1 shadow-lg backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/60\">\n        <button\n          onClick={handleZoomOut}\n          className=\"rounded p-1.5 text-neutral-600 transition-colors hover:bg-[#0A84FF]/10 hover:text-[#0A84FF] dark:text-neutral-400\"\n        >\n          <Minus className=\"size-4\" />\n        </button>\n        <span className=\"w-12 text-center text-xs font-semibold text-neutral-700 dark:text-neutral-300\">\n          {Math.round(zoom * 100)}%\n        </span>\n        <button\n          onClick={handleZoomIn}\n          className=\"rounded p-1.5 text-neutral-600 transition-colors hover:bg-[#0A84FF]/10 hover:text-[#0A84FF] dark:text-neutral-400\"\n        >\n          <Plus className=\"size-4\" />\n        </button>\n        <div className=\"mx-1 h-5 w-px bg-neutral-200 dark:bg-neutral-700\" />\n        <button\n          onClick={handleResetView}\n          className=\"rounded p-1.5 text-neutral-600 transition-colors hover:bg-[#0A84FF]/10 hover:text-[#0A84FF] dark:text-neutral-400\"\n        >\n          <Maximize2 className=\"size-4\" />\n        </button>\n      </div>\n    </footer>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;;;AAHA;;;AAKO,SAAS;;IACd,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,IAAA,oIAAiB;IAEnD,MAAM,eAAe,IAAM,QAAQ,OAAO;IAC1C,MAAM,gBAAgB,IAAM,QAAQ,OAAO;IAC3C,MAAM,kBAAkB;QACtB,QAAQ;QACR,OAAO,GAAG;IACZ;IAEA,qBACE,6LAAC;QAAO,WAAU;kBAChB,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBACC,SAAS;oBACT,WAAU;8BAEV,cAAA,6LAAC,gNAAK;wBAAC,WAAU;;;;;;;;;;;8BAEnB,6LAAC;oBAAK,WAAU;;wBACb,KAAK,KAAK,CAAC,OAAO;wBAAK;;;;;;;8BAE1B,6LAAC;oBACC,SAAS;oBACT,WAAU;8BAEV,cAAA,6LAAC,6MAAI;wBAAC,WAAU;;;;;;;;;;;8BAElB,6LAAC;oBAAI,WAAU;;;;;;8BACf,6LAAC;oBACC,SAAS;oBACT,WAAU;8BAEV,cAAA,6LAAC,gOAAS;wBAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;AAK/B;GAtCgB;;QACoB,oIAAiB;;;KADrC"}},
    {"offset": {"line": 5271, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/right-panel.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Download, FileImage, FileType, FileJson, FileBox, Image as ImageIcon } from \"lucide-react\"\nimport { useHaloboardStore } from \"@/lib/store\"\nimport { useStorage } from \"@/lib/storage\"\nimport { useTranslation } from \"@/lib/i18n\"\n\nexport function ExportMenu() {\n  const [isOpen, setIsOpen] = useState(false)\n  const storage = useStorage()\n  const { t } = useTranslation()\n\n  const handleExportPNG = () => {\n    const canvas = document.querySelector(\"canvas\")\n    if (canvas && storage) {\n      storage.exportAsPNG(canvas)\n      setIsOpen(false)\n    }\n  }\n\n  const handleExportSVG = () => {\n    if (storage) {\n      storage.exportAsSVG([]) // Placeholder call\n      setIsOpen(false)\n    }\n  }\n\n  const handleExportJSON = () => {\n    if (storage) {\n      storage.exportAsJSON()\n      setIsOpen(false)\n    }\n  }\n\n  const handleExportTPAD = () => {\n    if (storage) {\n      storage.exportAsTPAD()\n      setIsOpen(false)\n    }\n  }\n\n  const handleExportPSD = () => {\n    const canvas = document.querySelector(\"canvas\")\n    if (canvas && storage) {\n      storage.exportAsPSD(canvas)\n      setIsOpen(false)\n    }\n  }\n\n  return (\n    <div className=\"relative\">\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"flex items-center gap-2 rounded-lg bg-white/60 px-3 py-2 text-sm font-medium text-neutral-700 shadow-lg backdrop-blur-xl transition-colors hover:bg-white/80 dark:bg-neutral-900/60 dark:text-neutral-300 dark:hover:bg-neutral-900/80\"\n      >\n        <Download className=\"size-4\" />\n        {t(\"export\")}\n      </button>\n\n      {isOpen && (\n        <>\n          <div className=\"fixed inset-0 z-40\" onClick={() => setIsOpen(false)} />\n          <div className=\"absolute right-0 top-full z-50 mt-2 w-48 rounded-lg border border-white/20 bg-white/90 shadow-xl backdrop-blur-xl dark:border-white/10 dark:bg-neutral-900/90\">\n            <div className=\"p-1 space-y-0.5\">\n              <button onClick={handleExportTPAD} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <FileBox className=\"size-4\" />\n                {t(\"exportTPAD\")}\n              </button>\n              <div className=\"h-px bg-neutral-200 dark:bg-neutral-700 my-1\" />\n              <button onClick={handleExportPSD} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <ImageIcon className=\"size-4\" />\n                {t(\"exportPSD\")}\n              </button>\n              <button onClick={handleExportPNG} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <FileImage className=\"size-4\" />\n                {t(\"exportPNG\")}\n              </button>\n              <button onClick={handleExportSVG} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <FileType className=\"size-4\" />\n                {t(\"exportSVG\")}\n              </button>\n              <button onClick={handleExportJSON} className=\"flex w-full items-center gap-3 rounded-lg px-3 py-2 text-left text-sm text-neutral-700 transition-colors hover:bg-black/5 dark:text-neutral-300 dark:hover:bg-white/5\">\n                <FileJson className=\"size-4\" />\n                {t(\"exportJSON\")}\n              </button>\n            </div>\n          </div>\n        </>\n      )}\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;;;AANA;;;;;AAQO,SAAS;;IACd,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,UAAU,IAAA,gIAAU;IAC1B,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,gIAAc;IAE5B,MAAM,kBAAkB;QACtB,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,IAAI,UAAU,SAAS;YACrB,QAAQ,WAAW,CAAC;YACpB,UAAU;QACZ;IACF;IAEA,MAAM,kBAAkB;QACtB,IAAI,SAAS;YACX,QAAQ,WAAW,CAAC,EAAE,GAAE,mBAAmB;YAC3C,UAAU;QACZ;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,SAAS;YACX,QAAQ,YAAY;YACpB,UAAU;QACZ;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,SAAS;YACX,QAAQ,YAAY;YACpB,UAAU;QACZ;IACF;IAEA,MAAM,kBAAkB;QACtB,MAAM,SAAS,SAAS,aAAa,CAAC;QACtC,IAAI,UAAU,SAAS;YACrB,QAAQ,WAAW,CAAC;YACpB,UAAU;QACZ;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBACC,SAAS,IAAM,UAAU,CAAC;gBAC1B,WAAU;;kCAEV,6LAAC,yNAAQ;wBAAC,WAAU;;;;;;oBACnB,EAAE;;;;;;;YAGJ,wBACC;;kCACE,6LAAC;wBAAI,WAAU;wBAAqB,SAAS,IAAM,UAAU;;;;;;kCAC7D,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAO,SAAS;oCAAkB,WAAU;;sDAC3C,6LAAC,0NAAO;4CAAC,WAAU;;;;;;wCAClB,EAAE;;;;;;;8CAEL,6LAAC;oCAAI,WAAU;;;;;;8CACf,6LAAC;oCAAO,SAAS;oCAAiB,WAAU;;sDAC1C,6LAAC,gNAAS;4CAAC,WAAU;;;;;;wCACpB,EAAE;;;;;;;8CAEL,6LAAC;oCAAO,SAAS;oCAAiB,WAAU;;sDAC1C,6LAAC,gOAAS;4CAAC,WAAU;;;;;;wCACpB,EAAE;;;;;;;8CAEL,6LAAC;oCAAO,SAAS;oCAAiB,WAAU;;sDAC1C,6LAAC,6NAAQ;4CAAC,WAAU;;;;;;wCACnB,EAAE;;;;;;;8CAEL,6LAAC;oCAAO,SAAS;oCAAkB,WAAU;;sDAC3C,6LAAC,6NAAQ;4CAAC,WAAU;;;;;;wCACnB,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;AAQnB;GApFgB;;QAEE,gIAAU;QACZ,gIAAc;;;KAHd"}},
    {"offset": {"line": 5498, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/collaboration-cursors.tsx"],"sourcesContent":["\"use client\"\n\nimport { useHaloboardStore } from \"@/lib/store\"\nimport { MousePointer2 } from \"lucide-react\"\n\nexport function CollaborationCursors() {\n  const { users, currentUserId, zoom, panX, panY } = useHaloboardStore()\n\n  // Filter out current user and users without cursor position\n  const otherUsers = users.filter((user) => user.id !== currentUserId && user.cursor)\n\n  return (\n    <>\n      {otherUsers.map((user) => (\n        <div\n          key={user.id}\n          className=\"pointer-events-none absolute z-50 transition-transform duration-100\"\n          style={{\n            left: `${user.cursor!.x * zoom + panX}px`,\n            top: `${user.cursor!.y * zoom + panY}px`,\n            transform: \"translate(-2px, -2px)\",\n          }}\n        >\n          {/* Cursor Icon */}\n          <MousePointer2 className=\"size-5 drop-shadow-lg\" style={{ color: user.color }} fill={user.color} />\n\n          {/* User Name Label */}\n          <div\n            className=\"mt-1 whitespace-nowrap rounded-md px-2 py-1 text-xs font-medium text-white shadow-lg\"\n            style={{ backgroundColor: user.color }}\n          >\n            {user.name}\n          </div>\n        </div>\n      ))}\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAKO,SAAS;;IACd,MAAM,EAAE,KAAK,EAAE,aAAa,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,IAAA,oIAAiB;IAEpE,4DAA4D;IAC5D,MAAM,aAAa,MAAM,MAAM,CAAC,CAAC,OAAS,KAAK,EAAE,KAAK,iBAAiB,KAAK,MAAM;IAElF,qBACE;kBACG,WAAW,GAAG,CAAC,CAAC,qBACf,6LAAC;gBAEC,WAAU;gBACV,OAAO;oBACL,MAAM,GAAG,KAAK,MAAM,CAAE,CAAC,GAAG,OAAO,KAAK,EAAE,CAAC;oBACzC,KAAK,GAAG,KAAK,MAAM,CAAE,CAAC,GAAG,OAAO,KAAK,EAAE,CAAC;oBACxC,WAAW;gBACb;;kCAGA,6LAAC,gPAAa;wBAAC,WAAU;wBAAwB,OAAO;4BAAE,OAAO,KAAK,KAAK;wBAAC;wBAAG,MAAM,KAAK,KAAK;;;;;;kCAG/F,6LAAC;wBACC,WAAU;wBACV,OAAO;4BAAE,iBAAiB,KAAK,KAAK;wBAAC;kCAEpC,KAAK,IAAI;;;;;;;eAhBP,KAAK,EAAE;;;;;;AAsBtB;GAhCgB;;QACqC,oIAAiB;;;KADtD"}},
    {"offset": {"line": 5569, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/components/floating-chat-messages.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { useHaloboardStore } from \"@/lib/store\"\nimport type { ChatMessage } from \"@/lib/types\"\n\ninterface FloatingMessage extends ChatMessage {\n  x: number\n  y: number\n  visible: boolean\n}\n\nexport function FloatingChatMessages() {\n  const [floatingMessages, setFloatingMessages] = useState<FloatingMessage[]>([])\n  const { chatMessages, users, zoom, panX, panY } = useHaloboardStore()\n\n  // Show new messages as floating bubbles above user cursors\n  useEffect(() => {\n    const latestMessage = chatMessages[chatMessages.length - 1]\n    if (!latestMessage) return\n\n    // Find user and their cursor position\n    const user = users.find((u) => u.id === latestMessage.userId)\n    if (!user || !user.cursor) return\n\n    // Check if this message is already floating\n    const alreadyFloating = floatingMessages.some((fm) => fm.id === latestMessage.id)\n    if (alreadyFloating) return\n\n    // Add floating message\n    const newFloatingMessage: FloatingMessage = {\n      ...latestMessage,\n      x: user.cursor.x,\n      y: user.cursor.y - 60, // Position above cursor\n      visible: true,\n    }\n\n    setFloatingMessages((prev) => [...prev, newFloatingMessage])\n\n    // Remove after 3 seconds\n    setTimeout(() => {\n      setFloatingMessages((prev) => prev.map((fm) => (fm.id === latestMessage.id ? { ...fm, visible: false } : fm)))\n\n      // Clean up after fade animation\n      setTimeout(() => {\n        setFloatingMessages((prev) => prev.filter((fm) => fm.id !== latestMessage.id))\n      }, 300)\n    }, 3000)\n  }, [chatMessages])\n\n  return (\n    <>\n      {floatingMessages.map((msg) => {\n        const user = users.find((u) => u.id === msg.userId)\n\n        return (\n          <div\n            key={msg.id}\n            className={`pointer-events-none absolute z-40 max-w-xs transition-opacity duration-300 ${\n              msg.visible ? \"opacity-100\" : \"opacity-0\"\n            }`}\n            style={{\n              left: `${msg.x * zoom + panX}px`,\n              top: `${msg.y * zoom + panY}px`,\n            }}\n          >\n            <div className=\"rounded-lg bg-neutral-800 px-3 py-2 text-sm text-white shadow-lg dark:bg-neutral-700\">\n              <div className=\"mb-1 text-xs font-medium\" style={{ color: user?.color }}>\n                {user?.name}\n              </div>\n              <div>{msg.content}</div>\n            </div>\n            {/* Speech bubble tail */}\n            <div\n              className=\"absolute left-4 top-full h-0 w-0\"\n              style={{\n                borderLeft: \"6px solid transparent\",\n                borderRight: \"6px solid transparent\",\n                borderTop: \"6px solid rgb(38, 38, 38)\",\n              }}\n            />\n          </div>\n        )\n      })}\n    </>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AAYO,SAAS;;IACd,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAoB,EAAE;IAC9E,MAAM,EAAE,YAAY,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,IAAA,oIAAiB;IAEnE,2DAA2D;IAC3D,IAAA,0KAAS;0CAAC;YACR,MAAM,gBAAgB,YAAY,CAAC,aAAa,MAAM,GAAG,EAAE;YAC3D,IAAI,CAAC,eAAe;YAEpB,sCAAsC;YACtC,MAAM,OAAO,MAAM,IAAI;uDAAC,CAAC,IAAM,EAAE,EAAE,KAAK,cAAc,MAAM;;YAC5D,IAAI,CAAC,QAAQ,CAAC,KAAK,MAAM,EAAE;YAE3B,4CAA4C;YAC5C,MAAM,kBAAkB,iBAAiB,IAAI;kEAAC,CAAC,KAAO,GAAG,EAAE,KAAK,cAAc,EAAE;;YAChF,IAAI,iBAAiB;YAErB,uBAAuB;YACvB,MAAM,qBAAsC;gBAC1C,GAAG,aAAa;gBAChB,GAAG,KAAK,MAAM,CAAC,CAAC;gBAChB,GAAG,KAAK,MAAM,CAAC,CAAC,GAAG;gBACnB,SAAS;YACX;YAEA;kDAAoB,CAAC,OAAS;2BAAI;wBAAM;qBAAmB;;YAE3D,yBAAyB;YACzB;kDAAW;oBACT;0DAAoB,CAAC,OAAS,KAAK,GAAG;kEAAC,CAAC,KAAQ,GAAG,EAAE,KAAK,cAAc,EAAE,GAAG;wCAAE,GAAG,EAAE;wCAAE,SAAS;oCAAM,IAAI;;;oBAEzG,gCAAgC;oBAChC;0DAAW;4BACT;kEAAoB,CAAC,OAAS,KAAK,MAAM;0EAAC,CAAC,KAAO,GAAG,EAAE,KAAK,cAAc,EAAE;;;wBAC9E;yDAAG;gBACL;iDAAG;QACL;yCAAG;QAAC;KAAa;IAEjB,qBACE;kBACG,iBAAiB,GAAG,CAAC,CAAC;YACrB,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,IAAI,MAAM;YAElD,qBACE,6LAAC;gBAEC,WAAW,CAAC,2EAA2E,EACrF,IAAI,OAAO,GAAG,gBAAgB,aAC9B;gBACF,OAAO;oBACL,MAAM,GAAG,IAAI,CAAC,GAAG,OAAO,KAAK,EAAE,CAAC;oBAChC,KAAK,GAAG,IAAI,CAAC,GAAG,OAAO,KAAK,EAAE,CAAC;gBACjC;;kCAEA,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;gCAA2B,OAAO;oCAAE,OAAO,MAAM;gCAAM;0CACnE,MAAM;;;;;;0CAET,6LAAC;0CAAK,IAAI,OAAO;;;;;;;;;;;;kCAGnB,6LAAC;wBACC,WAAU;wBACV,OAAO;4BACL,YAAY;4BACZ,aAAa;4BACb,WAAW;wBACb;;;;;;;eAtBG,IAAI,EAAE;;;;;QA0BjB;;AAGN;GA1EgB;;QAEoC,oIAAiB;;;KAFrD"}},
    {"offset": {"line": 5713, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/hooks/use-mobile.ts"],"sourcesContent":["import * as React from 'react'\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener('change', onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener('change', onChange)\n  }, [])\n\n  return !!isMobile\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,yKAAc,CAAsB;IAEpE,0KAAe;iCAAC;YACd,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;YACvE,MAAM;kDAAW;oBACf,YAAY,OAAO,UAAU,GAAG;gBAClC;;YACA,IAAI,gBAAgB,CAAC,UAAU;YAC/B,YAAY,OAAO,UAAU,GAAG;YAChC;yCAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;;QACjD;gCAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACX;GAdgB"}},
    {"offset": {"line": 5749, "column": 0}, "map": {"version":3,"sources":["file:///home/anl/Desktop/Downloads/TeamPad-main/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { Canvas } from \"@/components/canvas\"\nimport { Toolbar } from \"@/components/toolbar\"\nimport { Header } from \"@/components/header\"\nimport { ZoomControls } from \"@/components/zoom-controls\"\nimport { RightPanel } from \"@/components/right-panel\"\nimport { CollaborationCursors } from \"@/components/collaboration-cursors\"\nimport { FloatingChatMessages } from \"@/components/floating-chat-messages\"\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { Smartphone } from \"lucide-react\"\nimport { useTheme } from \"next-themes\"\nimport { useHaloboardStore } from \"@/lib/store\"\nimport { useEffect, useState } from \"react\"\n\nexport default function Home() {\n  const isMobile = useIsMobile()\n  const { theme } = useTheme()\n  const { showGrid } = useHaloboardStore()\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => setMounted(true), [])\n\n  if (isMobile) {\n    return (\n      <div className=\"flex h-screen w-full flex-col items-center justify-center bg-neutral-50 p-4 text-center dark:bg-neutral-950\">\n        <div className=\"mb-4 rounded-full bg-neutral-200 p-6 dark:bg-neutral-800\">\n          <Smartphone className=\"size-10 text-neutral-500\" />\n        </div>\n        <h1 className=\"mb-2 text-xl font-bold text-neutral-900 dark:text-neutral-100\">\n          Mobile support is currently unavailable\n        </h1>\n        <p className=\"max-w-xs text-sm text-neutral-500 dark:text-neutral-400\">\n          Please use a desktop or laptop device to access Haloboard features.\n        </p>\n      </div>\n    )\n  }\n\n  const isDark = mounted && theme === 'dark'\n  const bgColor = isDark ? '#171717' : '#F9F9F9'\n\n  return (\n    <div className=\"relative flex h-screen w-full flex-col overflow-hidden transition-colors duration-300\" style={{ backgroundColor: bgColor }}>\n      <Header />\n      <main className=\"h-full w-full flex-1 pt-14 transition-colors duration-300\">\n        <div className=\"relative h-full w-full\">\n          <Canvas />\n          <CollaborationCursors />\n          <FloatingChatMessages />\n        </div>\n      </main>\n      <Toolbar />\n      <RightPanel />\n      <ZoomControls />\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAbA;;;;;;;;;;;;;AAee,SAAS;;IACtB,MAAM,WAAW,IAAA,wIAAW;IAC5B,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,+JAAQ;IAC1B,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,oIAAiB;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;0BAAC,IAAM,WAAW;yBAAO,EAAE;IAEpC,IAAI,UAAU;QACZ,qBACE,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;8BACb,cAAA,6LAAC,+NAAU;wBAAC,WAAU;;;;;;;;;;;8BAExB,6LAAC;oBAAG,WAAU;8BAAgE;;;;;;8BAG9E,6LAAC;oBAAE,WAAU;8BAA0D;;;;;;;;;;;;IAK7E;IAEA,MAAM,SAAS,WAAW,UAAU;IACpC,MAAM,UAAU,SAAS,YAAY;IAErC,qBACE,6LAAC;QAAI,WAAU;QAAwF,OAAO;YAAE,iBAAiB;QAAQ;;0BACvI,6LAAC,kIAAM;;;;;0BACP,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,kIAAM;;;;;sCACP,6LAAC,kKAAoB;;;;;sCACrB,6LAAC,sKAAoB;;;;;;;;;;;;;;;;0BAGzB,6LAAC,oIAAO;;;;;0BACR,6LAAC,8IAAU;;;;;0BACX,6LAAC,kJAAY;;;;;;;;;;;AAGnB;GA1CwB;;QACL,wIAAW;QACV,+JAAQ;QACL,oIAAiB;;;KAHhB"}}]
}